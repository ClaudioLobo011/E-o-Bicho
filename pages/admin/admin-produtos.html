<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin: Produto - E o Bicho</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../../src/output.css">

    <style>
        body[data-admin-product="compact"] {
            font-size: 0.6875rem;
            line-height: 1.35;
        }

        body[data-admin-product="compact"] main.container {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            padding-bottom: 1.5rem;
        }

        body[data-admin-product="compact"] .lg\:gap-6 {
            gap: 1rem !important;
        }

        body[data-admin-product="compact"] .space-y-5 > :not([hidden]) ~ :not([hidden]) {
            margin-top: 1rem !important;
        }

        body[data-admin-product="compact"] .space-y-4 > :not([hidden]) ~ :not([hidden]) {
            margin-top: 0.75rem !important;
        }

        body[data-admin-product="compact"] .space-y-6 > :not([hidden]) ~ :not([hidden]) {
            margin-top: 1.1rem !important;
        }

        body[data-admin-product="compact"] .gap-3 {
            gap: 0.75rem !important;
        }

        body[data-admin-product="compact"] .gap-4 {
            gap: 0.9rem !important;
        }

        body[data-admin-product="compact"] .gap-5 {
            gap: 1rem !important;
        }

        body[data-admin-product="compact"] .gap-2.5 {
            gap: 0.6rem !important;
        }

        body[data-admin-product="compact"] .gap-2 {
            gap: 0.5rem !important;
        }

        body[data-admin-product="compact"] .px-4 {
            padding-left: 0.85rem !important;
            padding-right: 0.85rem !important;
        }

        body[data-admin-product="compact"] .px-3.5 {
            padding-left: 0.75rem !important;
            padding-right: 0.75rem !important;
        }

        body[data-admin-product="compact"] .px-3 {
            padding-left: 0.65rem !important;
            padding-right: 0.65rem !important;
        }

        body[data-admin-product="compact"] .px-2.5 {
            padding-left: 0.55rem !important;
            padding-right: 0.55rem !important;
        }

        body[data-admin-product="compact"] .py-3 {
            padding-top: 0.65rem !important;
            padding-bottom: 0.65rem !important;
        }

        body[data-admin-product="compact"] .py-2.5 {
            padding-top: 0.55rem !important;
            padding-bottom: 0.55rem !important;
        }

        body[data-admin-product="compact"] .py-2 {
            padding-top: 0.45rem !important;
            padding-bottom: 0.45rem !important;
        }

        body[data-admin-product="compact"] .pb-5 {
            padding-bottom: 1rem !important;
        }

        body[data-admin-product="compact"] .pt-4 {
            padding-top: 0.9rem !important;
        }

        body[data-admin-product="compact"] .pb-4 {
            padding-bottom: 0.9rem !important;
        }

        body[data-admin-product="compact"] .pt-3 {
            padding-top: 0.65rem !important;
        }

        body[data-admin-product="compact"] .mt-3 {
            margin-top: 0.6rem !important;
        }

        body[data-admin-product="compact"] .mt-4 {
            margin-top: 0.85rem !important;
        }

        body[data-admin-product="compact"] .mt-6 {
            margin-top: 1.1rem !important;
        }

        body[data-admin-product="compact"] .rounded-2xl {
            border-radius: 0.85rem !important;
        }

        body[data-admin-product="compact"] .rounded-xl {
            border-radius: 0.75rem !important;
        }

        body[data-admin-product="compact"] .rounded-lg {
            border-radius: 0.55rem !important;
        }

        body[data-admin-product="compact"] .tab-link {
            padding: 0.3rem 0.7rem !important;
            font-size: 0.65rem !important;
            gap: 0.4rem !important;
        }

        body[data-admin-product="compact"] .tab-link i {
            font-size: 0.7rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form label {
            font-size: 0.7rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form input:not([type="checkbox"]),
        body[data-admin-product="compact"] #edit-product-form select,
        body[data-admin-product="compact"] #edit-product-form textarea {
            padding: 0.35rem 0.55rem !important;
            font-size: 0.7rem !important;
            border-radius: 0.5rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .mt-1.5 {
            margin-top: 0.4rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .mt-1 {
            margin-top: 0.3rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .text-xs,
        body[data-admin-product="compact"] #edit-product-form .text-[11px] {
            font-size: 0.7rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .text-sm {
            font-size: 0.75rem !important;
        }

        body[data-admin-product="compact"] header.bg-white,
        body[data-admin-product="compact"] #edit-product-form section {
            padding: 0.75rem 1rem !important;
        }

        body[data-admin-product="compact"] header.bg-white > div {
            gap: 0.5rem !important;
        }

        body[data-admin-product="compact"] .text-xl {
            font-size: 1.15rem !important;
        }

        body[data-admin-product="compact"] .text-base {
            font-size: 0.85rem !important;
        }

        body[data-admin-product="compact"] .text-[11px] {
            line-height: 1.3 !important;
        }

        body[data-admin-product="compact"] .text-[10px] {
            font-size: 0.62rem !important;
        }

        body[data-admin-product="compact"] .text-[13px] {
            font-size: 0.78rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .grid {
            gap: 0.75rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form .rounded-2xl.border-dashed {
            padding: 0.85rem !important;
        }

        body[data-admin-product="compact"] #edit-product-form textarea {
            min-height: 2.5rem;
        }

        body[data-admin-product="compact"] .compact-highlight {
            padding: 0.45rem 0.65rem !important;
            font-size: 0.62rem !important;
            gap: 0.3rem !important;
        }

        body[data-admin-product="compact"] .compact-highlight p {
            font-size: 0.66rem !important;
        }

        body[data-admin-product="compact"] #category-modal .space-y-4 > :not([hidden]) ~ :not([hidden]) {
            margin-top: 0.8rem !important;
        }

        body[data-admin-product="compact"] #category-modal .px-4 {
            padding-left: 0.75rem !important;
            padding-right: 0.75rem !important;
        }

        body[data-admin-product="compact"] #category-modal .py-4 {
            padding-top: 0.85rem !important;
            padding-bottom: 0.85rem !important;
        }

        body[data-admin-product="compact"] #category-modal .space-y-6 > :not([hidden]) ~ :not([hidden]) {
            margin-top: 1.05rem !important;
        }
    </style>
</head>
<body data-admin-product="compact" class="bg-gray-100 text-[12px] leading-relaxed">

    <div id="admin-header-placeholder"></div>

    <main class="container mx-auto px-3 pt-1 pb-8 min-h-screen">
        <div class="lg:grid lg:grid-cols-12 lg:gap-6">
            <aside class="lg:col-span-3 mb-4 lg:mb-0">
                <div id="admin-sidebar-placeholder"></div>
            </aside>

            <div class="lg:col-span-9 space-y-5">
                <form id="edit-product-form" class="space-y-5">
                    <section class="rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden">
                        <div class="px-4 pb-3 pt-4">
                            <div class="flex flex-col gap-2.5 lg:flex-row lg:items-start lg:justify-between">
                                <div class="space-y-2.5">
                                    <nav aria-label="Breadcrumb" class="flex flex-wrap items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500">
                                        <span class="inline-flex items-center gap-2 text-primary"><i class="fas fa-store"></i> Produtos</span>
                                        <i class="fas fa-angle-right text-gray-400"></i>
                                        <span class="text-gray-600">Cadastro</span>
                                    </nav>
                                    <div class="space-y-1">
                                        <h1 id="product-page-title" class="text-xl font-semibold text-gray-800">Editar Produto</h1>
                                        <p id="product-page-description" class="text-xs text-gray-600">Altere os dados do produto abaixo.</p>
                                    </div>
                                </div>
                                <div class="flex flex-col items-start gap-1.5 rounded-xl border border-dashed border-primary/40 bg-primary/5 px-3 py-2.5 text-[10px] text-primary compact-highlight">
                                    <span class="inline-flex items-center gap-2 font-semibold uppercase tracking-wide"><i class="fas fa-lightbulb"></i> Dica rápida</span>
                                    <p class="text-left text-[11px] leading-snug text-primary/80">As informações são salvas automaticamente no rascunho local. Revise cada aba antes de concluir.</p>
                                </div>
                            </div>
                        </div>

                        <div class="border-t border-gray-100 px-4 py-3">
                            <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                <div>
                                    <h2 class="text-base font-semibold text-gray-800">Identificação e resumo</h2>
                                    <p class="text-[11px] text-gray-500">Comece preenchendo os campos principais que serão usados em todas as telas.</p>
                                </div>
                                <span class="inline-flex items-center gap-2 rounded-full bg-primary/10 px-3 py-1 text-[10px] font-semibold uppercase tracking-wide text-primary"><i class="fas fa-id-card"></i> Dados básicos</span>
                            </div>
                        </div>

                        <div class="px-4 pb-4 pt-3 space-y-4">
                            <div class="grid grid-cols-1 gap-3 lg:grid-cols-12">
                                <div class="lg:col-span-3">
                                    <label for="cod" class="block text-xs font-semibold text-gray-700">Cod. Interno (SKU)</label>
                                    <input type="text" id="cod" name="cod" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o código interno (SKU)">
                                </div>
                                <div class="lg:col-span-5">
                                    <label for="nome" class="block text-xs font-semibold text-gray-700">Descrição</label>
                                    <input type="text" id="nome" name="nome" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o nome do produto">
                                </div>
                                <div class="lg:col-span-4">
                                    <label for="codbarras" class="block text-xs font-semibold text-gray-700">Código de Barras</label>
                                    <input type="text" id="codbarras" name="codbarras" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o código de barras">
                                </div>
                                <div class="lg:col-span-2">
                                    <label for="unidade" class="block text-xs font-semibold text-gray-700">Unidade</label>
                                    <select id="unidade" name="unidade" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <option value="">Selecionar...</option>
                                        <option value="UN">Unidade (UN)</option>
                                        <option value="KG">Quilograma (KG)</option>
                                        <option value="G">Grama (G)</option>
                                        <option value="MG">Miligrama (MG)</option>
                                        <option value="L">Litro (L)</option>
                                        <option value="ML">Mililitro (ML)</option>
                                        <option value="CX">Caixa (CX)</option>
                                        <option value="PCT">Pacote (PCT)</option>
                                        <option value="SC">Saco (SC)</option>
                                        <option value="FD">Fardo (FD)</option>
                                        <option value="DZ">Dúzia (DZ)</option>
                                    </select>
                                </div>
                                <div class="lg:col-span-4">
                                    <div class="flex items-end gap-3">
                                        <div class="flex-1">
                                            <label for="referencia" class="block text-xs font-semibold text-gray-700">Referência</label>
                                            <input type="text" id="referencia" name="referencia" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe a referência do fabricante">
                                        </div>
                                        <button type="button" id="open-price-history-btn" class="inline-flex items-center gap-2 self-end rounded-full border border-primary/40 bg-primary/10 px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-primary transition hover:bg-primary/20 focus:outline-none focus:ring-2 focus:ring-primary/30" title="Consultar histórico de preços">
                                            <i class="fas fa-clock-rotate-left text-[12px]"></i>
                                            Histórico de Preços
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="border-t border-gray-100 px-4 pb-4 pt-3">
                            <div class="flex flex-col gap-2.5 lg:flex-row lg:items-center lg:justify-between">
                                <div>
                                    <h2 class="text-base font-semibold text-gray-800">Detalhes do produto</h2>
                                    <p class="text-xs text-gray-500">Percorra as abas para completar preços, estoque, fiscal, fornecedores e outras informações.</p>
                                </div>
                                <div class="flex flex-wrap items-center gap-2 text-[10px] font-semibold text-gray-500">
                                    <span class="inline-flex items-center gap-2 rounded-full border border-primary/30 bg-primary/5 px-3 py-1 text-primary"><i class="fas fa-circle-notch animate-spin"></i> Rascunho ativo</span>
                                </div>
                            </div>
                            <div class="mt-3 overflow-x-auto pb-1.5">
                                <nav id="product-tabs" class="flex min-w-max items-center gap-1.5" role="tablist">
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-primary bg-white bg-primary/10 px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-primary shadow-sm transition" data-tab="#tab-prices" role="tab" id="tab-prices-trigger" aria-controls="tab-prices" aria-selected="true" tabindex="0"><i class="fas fa-tags"></i> Preços</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-barcodes" role="tab" id="tab-barcodes-trigger" aria-controls="tab-barcodes" aria-selected="false" tabindex="-1"><i class="fas fa-barcode"></i> Código de Barras</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-config" role="tab" id="tab-config-trigger" aria-controls="tab-config" aria-selected="false" tabindex="-1"><i class="fas fa-sliders"></i> Configurações</button>
                                    <button type="button" class="tab-link hidden items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-fraction" role="tab" id="tab-fraction-trigger" aria-controls="tab-fraction" aria-selected="false" tabindex="-1"><i class="fas fa-cut"></i> Fracionado</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-info" role="tab" id="tab-info-trigger" aria-controls="tab-info" aria-selected="false" tabindex="-1"><i class="fas fa-info-circle"></i> Informações</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-classification" role="tab" id="tab-classification-trigger" aria-controls="tab-classification" aria-selected="false" tabindex="-1"><i class="fas fa-layer-group"></i> Classificação</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-fiscal" role="tab" id="tab-fiscal-trigger" aria-controls="tab-fiscal" aria-selected="false" tabindex="-1"><i class="fas fa-file-invoice"></i> Informações fiscais</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-supplier" role="tab" id="tab-supplier-trigger" aria-controls="tab-supplier" aria-selected="false" tabindex="-1"><i class="fas fa-truck"></i> Fornecedor</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-stock" role="tab" id="tab-stock-trigger" aria-controls="tab-stock" aria-selected="false" tabindex="-1"><i class="fas fa-warehouse"></i> Estoque</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-images" role="tab" id="tab-images-trigger" aria-controls="tab-images" aria-selected="false" tabindex="-1"><i class="fas fa-image"></i> Foto do Produto</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-complement" role="tab" id="tab-complement-trigger" aria-controls="tab-complement" aria-selected="false" tabindex="-1"><i class="fas fa-file-lines"></i> Complemento</button>
                                    <button type="button" class="tab-link flex items-center gap-2 rounded-full border border-transparent bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-gray-500 transition hover:text-primary" data-tab="#tab-integration" role="tab" id="tab-integration-trigger" aria-controls="tab-integration" aria-selected="false" tabindex="-1"><i class="fas fa-globe"></i> Integração</button>
                                </nav>
                            </div>
                        </div>

                        <div class="space-y-5">
                            <div id="tab-prices" class="space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-prices-trigger" aria-hidden="false">
                                <div class="grid grid-cols-1 gap-3 md:grid-cols-3">
                                    <div class="rounded-xl border border-gray-200 bg-gray-50/60 p-3.5">
                                        <label for="custo" class="block text-xs font-semibold text-gray-700">Preço de Custo (R$)</label>
                                        <input type="number" step="0.01" id="custo" name="custo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-gray-50/60 p-3.5">
                                        <label for="markup" class="block text-xs font-semibold text-gray-700">Markup (%)</label>
                                        <input type="number" step="0.01" id="markup" name="markup" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <p class="mt-1.5 text-[11px] text-gray-500">O markup é atualizado automaticamente ao alterar o custo ou o preço de venda.</p>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-gray-50/60 p-3.5">
                                        <label for="venda" class="block text-xs font-semibold text-gray-700">Preço de Venda (R$)</label>
                                        <input type="number" step="0.01" id="venda" name="venda" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="custo-medio" class="block text-xs font-semibold text-gray-700">Custo Médio (R$)</label>
                                        <input type="number" step="0.01" id="custo-medio" name="custo-medio" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="lucro" class="block text-xs font-semibold text-gray-700">Margem de Lucro (%)</label>
                                        <input type="number" step="0.01" id="lucro" name="lucro" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <p class="mt-1.5 text-[11px] text-gray-500">Atualize a margem manualmente se necessário.</p>
                                    </div>
                                </div>

                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4">
                                    <h3 class="text-[13px] font-semibold text-gray-800">Promoções e descontos</h3>
                                    <div class="mt-3 grid grid-cols-1 gap-3 md:grid-cols-3">
                                        <div>
                                            <label for="promo-preco" class="block text-xs font-semibold text-gray-700">Preço promocional (R$)</label>
                                            <input type="number" step="0.01" id="promo-preco" name="promo-preco" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        </div>
                                        <div>
                                            <label for="promo-inicio" class="block text-xs font-semibold text-gray-700">Início da promoção</label>
                                            <input type="date" id="promo-inicio" name="promo-inicio" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        </div>
                                        <div>
                                            <label for="promo-validade" class="block text-xs font-semibold text-gray-700">Validade da promoção</label>
                                            <input type="date" id="promo-validade" name="promo-validade" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-barcodes" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-barcodes-trigger" aria-hidden="true">
                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="spec-codbarras" class="block text-xs font-semibold text-gray-700">Código de Barras Principal</label>
                                        <input type="text" id="spec-codbarras" class="mt-1.5 w-full rounded-lg border border-gray-200 bg-gray-100 px-3 py-1.5 text-xs text-gray-500" disabled>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="barcode-additional" class="block text-xs font-semibold text-gray-700">Códigos Complementares</label>
                                        <textarea id="barcode-additional" rows="4" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Liste outros códigos de barras separados por linha"></textarea>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500">Utilize esta aba para documentar códigos de barras alternativos utilizados em outros sistemas ou embalagens.</p>
                            </div>

                            <div id="tab-config" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-config-trigger" aria-hidden="true">
                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="marca" class="block text-xs font-semibold text-gray-700">Marca</label>
                                        <input type="text" id="marca" name="marca" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="spec-apresentacao" class="block text-xs font-semibold text-gray-700">Apresentação</label>
                                        <input type="text" id="spec-apresentacao" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="md:col-span-2 rounded-xl border border-dashed border-emerald-200 bg-emerald-50/50 p-4">
                                        <label class="inline-flex items-start gap-3 text-xs font-semibold text-gray-700">
                                            <input type="checkbox" id="fractioned-toggle" class="mt-1 h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-400">
                                            <span>
                                                Produto fracionado
                                                <span class="mt-1 block text-[11px] font-normal text-gray-500">Ative para vincular produtos filhos, recalcular o custo automaticamente e acompanhar o impacto no estoque.</span>
                                            </span>
                                        </label>
                                    </div>
                                    <div class="md:col-span-2 rounded-xl border border-dashed border-gray-300 bg-gray-50 p-4">
                                        <label class="inline-flex items-start gap-3 text-xs font-semibold text-gray-700">
                                            <input type="checkbox" id="inativo" name="inativo" class="mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary/20">
                                            <span>
                                                Produto inativo
                                                <span class="mt-1 block text-[11px] font-normal text-gray-500">Marque para ocultar o produto das vendas e listagens públicas.</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-fraction" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-fraction-trigger" aria-hidden="true">
                                <div class="space-y-5 rounded-2xl border border-dashed border-gray-300 bg-white p-4">
                                    <div class="flex flex-col gap-3 lg:flex-row lg:items-end lg:justify-between">
                                        <div>
                                            <h3 class="text-sm font-semibold text-gray-800">Produtos filhos</h3>
                                            <p class="text-xs text-gray-500">Selecione os itens utilizados no fracionamento para atualizar automaticamente custo e estoque.</p>
                                        </div>
                                        <div class="w-full max-w-sm">
                                            <label for="fraction-child-search" class="block text-xs font-semibold text-gray-700">Buscar produto filho</label>
                                            <div class="relative mt-1">
                                                <input type="text" id="fraction-child-search" class="w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Digite nome, código ou código de barras">
                                                <div id="fraction-child-suggestions" class="absolute left-0 right-0 top-full z-10 mt-1 hidden rounded-lg border border-gray-200 bg-white shadow-lg"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-2xl border border-gray-200 bg-gray-50 p-4">
                                        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                            <div>
                                                <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-600">Criar novo produto filho</h4>
                                                <p class="text-[11px] text-gray-500">Informe os dados abaixo para gerar automaticamente um produto filho baseado no produto atual.</p>
                                            </div>
                                        </div>
                                        <div class="mt-3 grid gap-3 md:grid-cols-4">
                                            <div class="md:col-span-2">
                                                <label for="fraction-new-description" class="block text-xs font-semibold text-gray-700">Descrição</label>
                                                <input type="text" id="fraction-new-description" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe a descrição do produto filho">
                                            </div>
                                            <div>
                                                <label for="fraction-new-unit" class="block text-xs font-semibold text-gray-700">Unidade</label>
                                                <select id="fraction-new-unit" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                    <option value="">Selecionar...</option>
                                                    <option value="UN">Unidade (UN)</option>
                                                    <option value="KG">Quilograma (KG)</option>
                                                    <option value="G">Grama (G)</option>
                                                    <option value="MG">Miligrama (MG)</option>
                                                    <option value="L">Litro (L)</option>
                                                    <option value="ML">Mililitro (ML)</option>
                                                    <option value="CX">Caixa (CX)</option>
                                                    <option value="PCT">Pacote (PCT)</option>
                                                    <option value="SC">Saco (SC)</option>
                                                    <option value="FD">Fardo (FD)</option>
                                                    <option value="DZ">Dúzia (DZ)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label for="fraction-new-barcode" class="block text-xs font-semibold text-gray-700">Código de barras (opcional)</label>
                                                <input type="text" id="fraction-new-barcode" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o código de barras">
                                            </div>
                                        </div>
                                        <div class="mt-4 flex justify-end">
                                            <button type="button" id="fraction-create-child-btn" class="inline-flex items-center gap-2 rounded-full border border-primary/40 bg-primary/10 px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-primary transition hover:bg-primary/20 focus:outline-none focus:ring-2 focus:ring-primary/30">
                                                <i class="fas fa-plus"></i>
                                                Adicionar produto filho
                                            </button>
                                        </div>
                                    </div>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 text-left">
                                            <thead class="bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500">
                                                <tr>
                                                    <th scope="col" class="px-3 py-2 font-semibold">Produto filho</th>
                                                    <th scope="col" class="px-3 py-2 text-center font-semibold">Qtd. após fracionamento</th>
                                                    <th scope="col" class="px-3 py-2 text-center font-semibold">Qtd. utilizada</th>
                                                    <th scope="col" class="px-3 py-2 text-center font-semibold">Estoque filho</th>
                                                    <th scope="col" class="px-3 py-2 text-center font-semibold">Equivalente no pai</th>
                                                    <th scope="col" class="px-3 py-2 text-center font-semibold">Custo calculado</th>
                                                    <th scope="col" class="px-3 py-2 text-right font-semibold">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="fraction-child-tbody" class="divide-y divide-gray-100 text-xs"></tbody>
                                        </table>
                                        <div id="fraction-child-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 p-4 text-center text-xs text-gray-500">
                                            Nenhum produto filho adicionado. Utilize a busca para vincular um produto e informar as quantidades.
                                        </div>
                                    </div>
                                    <div class="grid gap-3 text-sm sm:grid-cols-2">
                                        <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                            <p class="text-xs font-semibold uppercase text-gray-500">Custo calculado</p>
                                            <p id="fraction-summary-cost" class="text-lg font-semibold text-gray-800">R$ 0,00</p>
                                        </div>
                                        <div class="rounded-lg border border-gray-200 bg-gray-50 p-3">
                                            <p class="text-xs font-semibold uppercase text-gray-500">Estoque equivalente do pai</p>
                                            <p id="fraction-summary-stock" class="text-lg font-semibold text-gray-800">0</p>
                                        </div>
                                    </div>
                                    <p class="text-[11px] text-gray-500">As quantidades informadas determinam o custo final do produto e o potencial de estoque derivado dos itens filhos.</p>
                                </div>
                            </div>

                            <div id="tab-info" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-info-trigger" aria-hidden="true">
                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="data-cadastro" class="block text-xs font-semibold text-gray-700">Data de Cadastro</label>
                                        <input type="date" id="data-cadastro" name="data-cadastro" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="data-vigencia" class="block text-xs font-semibold text-gray-700">Data de Vigência</label>
                                        <input type="date" id="data-vigencia" name="data-vigencia" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="peso" class="block text-xs font-semibold text-gray-700">Peso (Kg)</label>
                                        <input type="number" step="0.001" id="peso" name="peso" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o peso em quilogramas">
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="iat" class="block text-xs font-semibold text-gray-700">IAT</label>
                                        <select id="iat" name="iat" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            <option value="">Selecionar...</option>
                                            <option value="Arredondamento">Arredondamento</option>
                                            <option value="Truncamento">Truncamento</option>
                                        </select>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label for="tipo-produto" class="block text-xs font-semibold text-gray-700">Tipo de Produto</label>
                                        <select id="tipo-produto" name="tipo-produto" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            <option value="">Selecionar...</option>
                                            <option value="Revenda">Revenda</option>
                                            <option value="Consumo Interno">Consumo Interno</option>
                                            <option value="Bonificação">Bonificação</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-classification" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-classification-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4">
                                    <label class="mb-2 block text-xs font-semibold text-gray-700">Categorias Atuais</label>
                                    <div id="category-tags-container" class="flex min-h-[2.75rem] flex-wrap items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2"></div>
                                    <button type="button" id="add-category-btn" class="mt-3 inline-flex items-center gap-2 text-xs font-semibold text-primary transition hover:underline">
                                        <i class="fas fa-plus-circle"></i>
                                        Adicionar / Remover Categorias
                                    </button>
                                </div>
                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label class="block text-xs font-semibold text-gray-700">Idade</label>
                                        <div class="mt-3 flex flex-wrap gap-3 text-xs">
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-idade" value="Filhotes" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Filhotes</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-idade" value="Adulto" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Adulto</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-idade" value="Sênior" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Sênior</label>
                                        </div>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm">
                                        <label class="block text-xs font-semibold text-gray-700">Porte Raça</label>
                                        <div class="mt-3 flex flex-wrap gap-3 text-xs">
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-porte" value="Mini" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Mini</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-porte" value="Pequeno" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Pequeno</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-porte" value="Médio" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Médio</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-porte" value="Grande" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Grande</label>
                                            <label class="inline-flex items-center gap-2"><input type="checkbox" name="spec-porte" value="Gigante" class="rounded border-gray-300 text-primary focus:ring-primary/20"> Gigante</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-fiscal" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-fiscal-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4 space-y-5">
                                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                        <div>
                                            <h3 class="text-[13px] font-semibold text-gray-800">Empresa fiscal selecionada</h3>
                                            <p class="text-[11px] text-gray-500">Os campos são agrupados por empresa fiscal cadastrada.</p>
                                        </div>
                                        <div class="flex items-center gap-2 text-[11px] font-semibold text-gray-500">
                                            <label for="fiscal-company-select" class="hidden">Empresa fiscal</label>
                                            <select id="fiscal-company-select" class="rounded-full border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                        </div>
                                    </div>
                                    <div id="fiscal-company-summary" class="text-xs text-gray-600"></div>
                                </div>

                                <div class="grid grid-cols-1 gap-4 lg:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">Origem e códigos</h4>
                                        <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                            <div>
                                                <label for="fiscal-origem" class="block text-xs font-semibold text-gray-700">Origem</label>
                                                <select id="fiscal-origem" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                            </div>
                                            <div>
                                                <label for="fiscal-csosn" class="block text-xs font-semibold text-gray-700">CSOSN</label>
                                                <input type="text" id="fiscal-csosn" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-cst" class="block text-xs font-semibold text-gray-700">CST</label>
                                                <input type="text" id="fiscal-cst" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-cest" class="block text-xs font-semibold text-gray-700">CEST</label>
                                                <input type="text" id="fiscal-cest" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">Situação fiscal</h4>
                                        <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                            <div>
                                                <label for="fiscal-status-nfe" class="block text-xs font-semibold text-gray-700">Status NF-e</label>
                                                <select id="fiscal-status-nfe" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                            </div>
                                            <div>
                                                <label for="fiscal-status-nfce" class="block text-xs font-semibold text-gray-700">Status NFC-e</label>
                                                <select id="fiscal-status-nfce" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm space-y-5">
                                    <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">CFOP</h4>
                                    <div class="grid grid-cols-1 gap-4 lg:grid-cols-2">
                                        <div class="space-y-3">
                                            <h5 class="text-xs font-semibold text-gray-700">NF-e</h5>
                                            <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                                <div>
                                                    <label for="fiscal-cfop-nfe-interno" class="block text-xs font-semibold text-gray-700">Interno</label>
                                                    <input type="text" id="fiscal-cfop-nfe-interno" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfe-interestadual" class="block text-xs font-semibold text-gray-700">Interestadual</label>
                                                    <input type="text" id="fiscal-cfop-nfe-interestadual" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfe-transferencia" class="block text-xs font-semibold text-gray-700">Transferência</label>
                                                    <input type="text" id="fiscal-cfop-nfe-transferencia" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfe-devolucao" class="block text-xs font-semibold text-gray-700">Devolução</label>
                                                    <input type="text" id="fiscal-cfop-nfe-devolucao" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfe-industrializacao" class="block text-xs font-semibold text-gray-700">Industrialização</label>
                                                    <input type="text" id="fiscal-cfop-nfe-industrializacao" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="space-y-3">
                                            <h5 class="text-xs font-semibold text-gray-700">NFC-e</h5>
                                            <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                                <div>
                                                    <label for="fiscal-cfop-nfce-interno" class="block text-xs font-semibold text-gray-700">Interno</label>
                                                    <input type="text" id="fiscal-cfop-nfce-interno" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfce-interestadual" class="block text-xs font-semibold text-gray-700">Interestadual</label>
                                                    <input type="text" id="fiscal-cfop-nfce-interestadual" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfce-transferencia" class="block text-xs font-semibold text-gray-700">Transferência</label>
                                                    <input type="text" id="fiscal-cfop-nfce-transferencia" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfce-devolucao" class="block text-xs font-semibold text-gray-700">Devolução</label>
                                                    <input type="text" id="fiscal-cfop-nfce-devolucao" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                                <div>
                                                    <label for="fiscal-cfop-nfce-industrializacao" class="block text-xs font-semibold text-gray-700">Industrialização</label>
                                                    <input type="text" id="fiscal-cfop-nfce-industrializacao" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 gap-4 lg:grid-cols-3">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">PIS</h4>
                                        <div class="space-y-3">
                                            <div>
                                                <label for="fiscal-pis-codigo" class="block text-xs font-semibold text-gray-700">Código</label>
                                                <input type="text" id="fiscal-pis-codigo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-pis-cst" class="block text-xs font-semibold text-gray-700">CST</label>
                                                <input type="text" id="fiscal-pis-cst" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-pis-aliquota" class="block text-xs font-semibold text-gray-700">Alíquota (%)</label>
                                                <input type="number" step="0.01" id="fiscal-pis-aliquota" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-pis-tipo" class="block text-xs font-semibold text-gray-700">Tipo</label>
                                                <input type="text" id="fiscal-pis-tipo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">COFINS</h4>
                                        <div class="space-y-3">
                                            <div>
                                                <label for="fiscal-cofins-codigo" class="block text-xs font-semibold text-gray-700">Código</label>
                                                <input type="text" id="fiscal-cofins-codigo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-cofins-cst" class="block text-xs font-semibold text-gray-700">CST</label>
                                                <input type="text" id="fiscal-cofins-cst" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-cofins-aliquota" class="block text-xs font-semibold text-gray-700">Alíquota (%)</label>
                                                <input type="number" step="0.01" id="fiscal-cofins-aliquota" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-cofins-tipo" class="block text-xs font-semibold text-gray-700">Tipo</label>
                                                <input type="text" id="fiscal-cofins-tipo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">IPI</h4>
                                        <div class="space-y-3">
                                            <div>
                                                <label for="fiscal-ipi-cst" class="block text-xs font-semibold text-gray-700">CST</label>
                                                <input type="text" id="fiscal-ipi-cst" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-ipi-enquadramento" class="block text-xs font-semibold text-gray-700">Enquadramento</label>
                                                <input type="text" id="fiscal-ipi-enquadramento" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-ipi-aliquota" class="block text-xs font-semibold text-gray-700">Alíquota (%)</label>
                                                <input type="number" step="0.01" id="fiscal-ipi-aliquota" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div>
                                                <label for="fiscal-ipi-tipo" class="block text-xs font-semibold text-gray-700">Tipo</label>
                                                <input type="text" id="fiscal-ipi-tipo" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                    <div class="rounded-xl border border-gray-200 bg-white p-3.5 shadow-sm space-y-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wide text-gray-500">FCP</h4>
                                        <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                            <div>
                                                <label for="fiscal-fcp-indicador" class="block text-xs font-semibold text-gray-700">Indicador</label>
                                                <select id="fiscal-fcp-indicador" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                            </div>
                                            <div>
                                                <label for="fiscal-fcp-aliquota" class="block text-xs font-semibold text-gray-700">Alíquota (%)</label>
                                                <input type="number" step="0.01" id="fiscal-fcp-aliquota" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                            <div class="md:col-span-2">
                                                <label for="fiscal-fcp-aplica" class="block text-xs font-semibold text-gray-700">Aplica?</label>
                                                <select id="fiscal-fcp-aplica" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-supplier" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-supplier-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4 space-y-5">
                                    <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
                                        <div>
                                            <label for="supplier-name" class="block text-xs font-semibold text-gray-700">Fornecedor</label>
                                            <input type="text" id="supplier-name" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Busque pelo nome do fornecedor">
                                        </div>
                                        <div>
                                            <label for="supplier-product-name" class="block text-xs font-semibold text-gray-700">Descrição no fornecedor</label>
                                            <input type="text" id="supplier-product-name" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Como o fornecedor identifica o produto">
                                        </div>
                                        <div>
                                            <label for="supplier-product-code" class="block text-xs font-semibold text-gray-700">Código no fornecedor</label>
                                            <input type="text" id="supplier-product-code" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Código interno ou SKU do fornecedor">
                                        </div>
                                        <div>
                                            <label for="supplier-entry-unit" class="block text-xs font-semibold text-gray-700">Unidade de entrada</label>
                                            <select id="supplier-entry-unit" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                        </div>
                                        <div>
                                            <label for="supplier-calc-type" class="block text-xs font-semibold text-gray-700">Tipo de cálculo</label>
                                            <select id="supplier-calc-type" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                        </div>
                                        <div>
                                            <label for="supplier-calc-value" class="block text-xs font-semibold text-gray-700">Valor de cálculo</label>
                                            <input type="number" step="0.01" id="supplier-calc-value" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informe o valor utilizado no cálculo">
                                        </div>
                                    </div>
                                    <div class="flex flex-wrap items-center justify-between gap-3">
                                        <div class="text-xs text-gray-500">Cadastre múltiplos fornecedores e organize a ordem de compra.</div>
                                        <button type="button" id="add-supplier-btn" class="inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-secondary">
                                            <i class="fas fa-plus"></i>
                                            Adicionar fornecedor
                                        </button>
                                    </div>
                                    <div id="supplier-suggestions" class="hidden"></div>
                                    <div id="supplier-list" class="space-y-3"></div>
                                </div>
                            </div>

                            <div id="tab-stock" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-stock-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4 space-y-5">
                                    <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                                        <div>
                                            <h3 class="text-[13px] font-semibold text-gray-800">Saldo por depósito</h3>
                                            <p class="text-[11px] text-gray-500">Controle os estoques em cada local para garantir a precisão das vendas.</p>
                                        </div>
                                        <div class="flex items-center gap-2 text-xs font-semibold text-gray-500">
                                            <span class="inline-flex items-center gap-2 rounded-full border border-primary/30 bg-primary/5 px-3 py-1 text-primary">Total em estoque:</span>
                                            <span id="deposit-total-display" class="text-xs font-semibold text-primary">0</span>
                                        </div>
                                    </div>
                                    <div id="deposit-table-wrapper" class="overflow-hidden rounded-xl border border-gray-200">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50 text-xs uppercase tracking-wide text-gray-500">
                                                <tr>
                                                    <th class="px-4 py-2 text-left font-semibold">Depósito</th>
                                                    <th class="px-4 py-2 text-left font-semibold">Estoque atual</th>
                                                    <th class="px-4 py-2 text-left font-semibold">Reservado</th>
                                                    <th class="px-4 py-2 text-left font-semibold">Disponível</th>
                                                    <th class="px-4 py-2 text-left font-semibold">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="deposit-stock-tbody" class="divide-y divide-gray-100 bg-white text-xs text-gray-700"></tbody>
                                        </table>
                                        <div id="deposit-empty-state" class="hidden bg-gray-50 px-4 py-6 text-center text-xs text-gray-500">Nenhum depósito vinculado até o momento.</div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-images" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-images-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-4 space-y-4">
                                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                        <div>
                                            <h3 class="text-[13px] font-semibold text-gray-800">Galeria do Produto</h3>
                                            <p class="text-[11px] text-gray-500">Arraste as imagens ou utilize as setas para definir a ordem exibida no site.</p>
                                        </div>
                                        <span id="image-order-status" class="hidden text-xs font-semibold text-primary"></span>
                                    </div>
                                    <div id="existing-images-grid" class="grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"></div>
                                    <div>
                                        <label for="imageUpload" class="block text-xs font-semibold text-gray-700">Adicionar novas imagens</label>
                                        <input type="file" id="imageUpload" name="imagens" multiple class="mt-1.5 block w-full text-sm text-gray-500 file:mr-4 file:cursor-pointer file:rounded-full file:border-0 file:bg-primary/10 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-primary hover:file:bg-primary/20">
                                    </div>
                                </div>
                            </div>

                            <div id="tab-complement" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-complement-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm">
                                    <label for="descricao" class="block text-xs font-semibold text-gray-700">Descrição Detalhada</label>
                                    <textarea id="descricao" name="descricao" rows="6" class="mt-1.5 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Inclua informações adicionais, instruções de uso ou observações relevantes"></textarea>
                                </div>
                            </div>

                            <div id="tab-integration" class="hidden space-y-5 px-4 pb-5 pt-4" role="tabpanel" aria-labelledby="tab-integration-trigger" aria-hidden="true">
                                <div class="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm space-y-4">
                                    <p class="text-xs text-gray-500">Configure os parâmetros de exibição para integrações externas e para o site.</p>
                                    <label class="inline-flex items-start gap-3 text-xs font-semibold text-gray-700">
                                        <input type="checkbox" id="hide-on-site" name="naoMostrarNoSite" class="mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary/20" checked>
                                        <span>
                                            Não mostrar no Site
                                            <span class="mt-1 block text-[11px] font-normal text-gray-500">Se marcado, o produto não aparece nas buscas ou nas páginas do site.</span>
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="rounded-2xl border border-gray-100 bg-white shadow-sm px-4 py-4 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
                        <button type="button" id="delete-product-button" class="hidden w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3.5 py-1.5 text-xs font-semibold text-red-700 transition hover:border-red-500 hover:bg-red-600 hover:text-white">
                            <i class="fas fa-trash-alt"></i>
                            Excluir Produto
                        </button>
                        <div class="flex w-full flex-col-reverse gap-3 sm:w-auto sm:flex-row sm:items-center sm:gap-3">
                            <button type="button" id="clear-form-button" class="inline-flex items-center justify-center gap-2 rounded-lg border border-gray-200 px-3.5 py-1.5 text-xs font-semibold text-gray-600 transition hover:bg-gray-100">
                                <i class="fas fa-rotate"></i>
                                Limpar
                            </button>
                            <button type="submit" class="inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-4 py-1.5 text-xs font-semibold text-white shadow-sm transition hover:bg-secondary">
                                <i class="fas fa-save"></i>
                                Salvar Alterações
                            </button>
                        </div>
                    </section>
                </form>
            </div>
        </div>
    </main>

    <div id="admin-footer-placeholder"></div>

    <div
        id="product-search-modal"
        class="hidden fixed inset-0 z-[998]"
        role="dialog"
        aria-modal="true"
        aria-hidden="true"
        aria-labelledby="product-search-modal-title"
        data-modal-open="false"
    >
        <div class="absolute inset-0 z-0 bg-gray-900/60 backdrop-blur-sm" data-close-product-search-modal></div>
        <div class="relative z-10 mx-auto flex min-h-full w-full items-start justify-center px-3 py-6 sm:items-center">
            <div class="product-search-modal-shell relative flex h-[520px] w-full max-w-5xl transform-gpu flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl text-[12px] leading-[1.35] max-h-[90vh] sm:h-[600px] sm:max-h-[85vh]">
                <div class="flex items-center justify-between border-b border-gray-100 px-5 py-4">
                    <h3 id="product-search-modal-title" class="text-base font-semibold text-gray-800">Buscar produtos</h3>
                    <button type="button" class="inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" data-close-product-search-modal>&times;</button>
                </div>
                <div class="flex min-h-0 flex-1 flex-col gap-4 overflow-hidden px-5 py-4">
                    <div class="flex flex-col gap-3 lg:flex-row lg:items-end lg:justify-between">
                        <div class="flex-1">
                            <label for="product-search-input" class="block text-xs font-semibold text-gray-700">Buscar</label>
                            <input type="text" id="product-search-input" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Busque por nome, código ou código de barras" autocomplete="off">
                        </div>
                    </div>
                    <div class="flex-1 overflow-hidden min-h-0">
                        <div class="h-full overflow-x-auto overflow-y-auto rounded-xl border border-gray-100">
                            <table class="min-w-full divide-y divide-gray-200 text-xs text-gray-600">
                                <thead class="bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500">
                                    <tr>
                                        <th scope="col" class="px-4 py-2 text-left font-semibold">Cod</th>
                                        <th scope="col" class="px-4 py-2 text-left font-semibold">Descrição</th>
                                        <th scope="col" class="px-4 py-2 text-left font-semibold">Cód. Barras</th>
                                        <th scope="col" class="px-4 py-2 text-right font-semibold">Custo</th>
                                        <th scope="col" class="px-4 py-2 text-right font-semibold">Venda</th>
                                    </tr>
                                </thead>
                                <tbody id="product-search-results">
                                    <tr>
                                        <td colspan="5" class="px-4 py-6 text-center text-[11px] text-gray-500">Digite para buscar produtos pelo código ou descrição.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="flex justify-end">
                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-lg border border-gray-200 px-3.5 py-1.5 text-xs font-semibold text-gray-600 transition hover:bg-gray-100" data-close-product-search-modal>Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div
        id="price-history-modal"
        class="hidden fixed inset-0 z-[999]"
        role="dialog"
        aria-modal="true"
        aria-hidden="true"
        aria-labelledby="price-history-modal-title"
        data-modal-open="false"
    >
        <div class="absolute inset-0 z-0 bg-gray-900/60 backdrop-blur-sm" data-close-price-history-modal></div>
        <div class="relative z-10 mx-auto flex min-h-full w-full items-start justify-center px-3 py-6 sm:items-center">
            <div class="modal-shell price-history-modal-shell relative flex w-full max-w-[1352px] transform-gpu flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl text-[12px] leading-[1.35]">
                <div class="flex items-center justify-between border-b border-gray-100 px-5 py-4">
                    <h3 id="price-history-modal-title" class="text-base font-semibold text-gray-800">Histórico de Preços</h3>
                    <button type="button" data-close-price-history-modal class="inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-400 transition hover:bg-gray-100 hover:text-gray-600">&times;</button>
                </div>
                <div class="flex flex-1 flex-col gap-4 overflow-hidden px-5 py-4">
                    <div class="flex flex-col gap-3 lg:flex-row lg:items-end lg:justify-between">
                        <div class="flex-1">
                            <label for="price-history-search" class="block text-xs font-semibold text-gray-700">Buscar</label>
                            <input type="text" id="price-history-search" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Filtrar por descrição, autor, campo ou tela">
                        </div>
                        <div class="grid flex-1 grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3">
                            <div>
                                <label for="price-history-field-filter" class="block text-xs font-semibold text-gray-700">Campo</label>
                                <select id="price-history-field-filter" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <option value="all">Todos</option>
                                </select>
                            </div>
                            <div>
                                <label for="price-history-screen-filter" class="block text-xs font-semibold text-gray-700">Tela</label>
                                <select id="price-history-screen-filter" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <option value="all">Todas</option>
                                </select>
                            </div>
                            <div>
                                <label for="price-history-author-filter" class="block text-xs font-semibold text-gray-700">Autor</label>
                                <select id="price-history-author-filter" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <option value="all">Todos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 overflow-hidden">
                        <div class="h-full overflow-x-auto overflow-y-auto rounded-xl border border-gray-100">
                            <table class="min-w-full divide-y divide-gray-200 text-xs text-gray-600">
                                <thead class="bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500">
                                <tr>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Cod</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="cod" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Cod">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="cod" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Cod">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="cod">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Descrição</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="descricao" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Descrição">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="descricao" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Descrição">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="descricao">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Data Alteração</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="dataAlteracao" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Data Alteração">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="dataAlteracao" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Data Alteração">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="dataAlteracao">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Tela</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="tela" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Tela">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="tela" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Tela">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="tela">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Autor</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="autor" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Autor">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="autor" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Autor">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="autor">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-right align-top font-semibold">
                                        <div class="flex flex-col items-end gap-1">
                                            <div class="flex w-full items-center justify-end gap-1">
                                                <span class="text-right text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Valor Anterior</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="valorAnterior" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Valor Anterior">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="valorAnterior" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Valor Anterior">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-right text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="valorAnterior">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-right align-top font-semibold">
                                        <div class="flex flex-col items-end gap-1">
                                            <div class="flex w-full items-center justify-end gap-1">
                                                <span class="text-right text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Valor Novo</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="valorNovo" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Valor Novo">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="valorNovo" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Valor Novo">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-right text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="valorNovo">
                                        </div>
                                    </th>
                                    <th scope="col" class="px-3 py-2 text-left align-top font-semibold">
                                        <div class="flex flex-col gap-1">
                                            <div class="flex items-center justify-between gap-1">
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-600 whitespace-nowrap">Campo</span>
                                                <div class="flex flex-col items-center justify-center gap-px text-gray-400">
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="campo" data-sort-direction="asc" aria-label="Ordenar crescente pela coluna Campo">
                                                        <i class="fas fa-sort-up text-[9px]"></i>
                                                    </button>
                                                    <button type="button" class="flex h-3.5 w-3.5 items-center justify-center rounded border border-transparent text-gray-400 transition hover:text-primary focus:outline-none focus:ring-1 focus:ring-primary/40" data-price-history-sort="campo" data-sort-direction="desc" aria-label="Ordenar decrescente pela coluna Campo">
                                                        <i class="fas fa-sort-down text-[9px]"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="text" placeholder="Filtrar" class="w-full rounded border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-600 placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-price-history-filter="campo">
                                        </div>
                                    </th>
                                </tr>
                                </thead>
                                <tbody id="price-history-table-body" class="divide-y divide-gray-100 bg-white"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="flex flex-col gap-3">
                        <div id="price-history-loading-state" class="flex items-center gap-2 rounded-lg border border-dashed border-primary/40 bg-primary/5 px-3 py-2 text-xs text-primary">
                            <i class="fas fa-circle-notch animate-spin"></i>
                            Carregando histórico de preços...
                        </div>
                        <div id="price-history-empty-state" class="hidden rounded-lg border border-dashed border-gray-200 px-3 py-2 text-xs text-gray-500">
                            Nenhuma alteração de preço registrada para este produto.
                        </div>
                        <div id="price-history-error-state" class="hidden rounded-lg border border-dashed border-red-200 bg-red-50 px-3 py-2 text-xs text-red-600">
                            Não foi possível carregar o histórico de preços. Tente novamente.
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-3 border-t border-gray-100 bg-gray-50 px-5 py-4">
                    <button type="button" data-close-price-history-modal class="inline-flex items-center justify-center gap-2 rounded-lg border border-gray-200 px-3.5 py-1.5 text-xs font-semibold text-gray-600 transition hover:bg-gray-100">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="category-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
        <div class="flex w-full max-w-lg flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl">
            <div class="flex items-center justify-between border-b border-gray-100 px-4 py-3">
                <h3 class="text-base font-semibold text-gray-800">Selecionar Categorias</h3>
                <button type="button" id="close-category-modal-btn" class="inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-400 transition hover:bg-gray-100 hover:text-gray-600">&times;</button>
            </div>
            <div id="category-tree-container" class="custom-scrollbar grow overflow-y-auto px-5 py-4" style="max-height: 60vh;"></div>
            <div class="flex items-center justify-end gap-3 border-t border-gray-100 bg-gray-50 px-5 py-4">
                <button type="button" id="cancel-category-modal-btn" class="inline-flex items-center justify-center gap-2 rounded-lg border border-gray-200 px-3.5 py-1.5 text-xs font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                <button type="button" id="save-category-modal-btn" class="inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-3.5 py-1.5 text-xs font-semibold text-white shadow-sm transition hover:bg-secondary">Confirmar Seleção</button>
            </div>
        </div>
    </div>

    <div id="modal-placeholder"></div>
    <div id="confirm-modal-placeholder"></div>

    <script>var basePath = '../../';</script>
    <script src="../../scripts/core/config.js"></script>
    <script src="../../scripts/core/ui.js"></script>
    <script src="../../scripts/core/main.js"></script>
    <script src="../../scripts/admin/admin.js"></script>
    <script src="../../scripts/admin/admin-produto-form.js"></script>
    <script src="/scripts/common/modal-bridge.js"></script>
</body>
</html>
