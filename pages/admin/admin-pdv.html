<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin: PDV - E o Bicho</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../../src/output.css">
    <style>
        body.pdv-fullscreen-active main.container {
            max-width: 100vw;
            width: 100%;
        }

        body.pdv-fullscreen-active #pdv-workspace {
            min-height: calc(100vh - 6rem);
        }

        body.pdv-fullscreen-active #admin-header-placeholder {
            display: none;
        }

        .pdv-exchange-shell {
            max-width: 1460px;
        }

        #pdv-exchange-modal .pdv-exchange-surface {
            background: linear-gradient(180deg, #f5f7fa 0%, #eef2f6 100%);
            border: 1px solid #cfd6de;
        }

        #pdv-exchange-modal .pdv-exchange-panel,
        #pdv-exchange-modal .pdv-exchange-summary {
            background: #f9fbfd;
            border-color: #d5dbe3;
            box-shadow: inset 0 1px 0 #ffffff;
        }

        #pdv-exchange-modal .pdv-exchange-card {
            background: #f6f8fb;
            border-color: #cfd6de;
        }

        #pdv-exchange-modal .pdv-exchange-card-title,
        #pdv-exchange-modal .pdv-exchange-card-footer {
            background: #5d6672;
        }

        #pdv-exchange-modal .pdv-exchange-header {
            background: #e2e8f0;
            color: #1f2937;
            border-bottom: 1px solid #cfd6de;
        }

        #pdv-exchange-modal .pdv-exchange-header button {
            color: #1f2937;
            border-color: #c1c9d2;
        }

        #pdv-exchange-modal .pdv-exchange-header button:hover {
            background: #d4dbe4;
        }

        #pdv-exchange-modal .pdv-exchange-actions {
            background: #eef2f6;
            border-top-color: #cfd6de;
        }

        #pdv-exchange-modal .pdv-exchange-actions button {
            color: #1f2937;
        }

        #pdv-exchange-modal .pdv-exchange-panel input,
        #pdv-exchange-modal .pdv-exchange-panel select,
        #pdv-exchange-modal .pdv-exchange-summary input {
            background: #ffffff;
            border-color: #d5dbe3;
        }

        #pdv-exchange-modal .pdv-exchange-table {
            height: 240px;
            overflow-y: auto;
            background: #f8fafc;
        }

        #pdv-exchange-modal .pdv-exchange-table thead {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        #confirm-modal,
        #info-modal {
            z-index: 2000;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="admin-header-placeholder"></div>

    <main class="container mx-auto px-4 pt-1 pb-6 min-h-screen">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <aside class="md:col-span-4">
                <div id="admin-sidebar-placeholder"></div>
            </aside>

            <div class="md:col-span-4 space-y-4">
                <section id="pdv-selection-section" class="bg-white border border-gray-100 rounded-xl shadow-sm p-4 space-y-3">
                    <div class="flex flex-col gap-2.5 lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex flex-col gap-1">
                            <h1 class="text-xl font-semibold text-gray-800">PDV</h1>
                            <p class="text-xs text-gray-600">Selecione a empresa e o ponto de venda para operar o caixa.</p>
                        </div>
                        <div class="flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-[11px] text-gray-500">
                            <i class="fas fa-cash-register text-primary text-xs"></i>
                            <span class="font-medium uppercase tracking-wide">Movimentação direta no PDV</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 gap-2.5 lg:grid-cols-2">
                        <div class="space-y-1">
                            <label for="company-select" class="block text-[13px] font-semibold text-gray-700">Empresa</label>
                            <select id="company-select" class="w-full rounded-lg border border-gray-200 px-3 py-1.5 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                                <option value="">Selecione uma empresa</option>
                            </select>
                        </div>
                        <div class="space-y-1">
                            <label for="pdv-select" class="block text-[13px] font-semibold text-gray-700">PDV</label>
                            <select id="pdv-select" class="w-full rounded-lg border border-gray-200 px-3 py-1.5 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" disabled>
                                <option value="">Selecione um PDV</option>
                            </select>
                        </div>
                    </div>

                    <p id="pdv-selection-hint" class="text-[11px] text-gray-500">Escolha a empresa para carregar os PDVs disponíveis.</p>
                </section>

                <section class="bg-white border border-gray-100 rounded-xl shadow-sm p-6 space-y-6">
                    <div id="pdv-empty-state" class="flex flex-col items-center justify-center text-center text-gray-500 py-12">
                        <i class="fas fa-store text-3xl mb-3 text-gray-400"></i>
                        <p class="text-sm font-medium">Selecione uma empresa e um PDV para iniciar o caixa.</p>
                    </div>

                    <div id="pdv-workspace" class="hidden space-y-6">
                        <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
                            <div class="space-y-2">
                                <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3">
                                    <div class="flex flex-wrap items-center gap-2">
                                        <span id="pdv-status-badge" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-600">
                                            <i class="fas fa-lock"></i>
                                            Caixa fechado
                                        </span>
                                        <span id="pdv-sale-code-wrapper" class="hidden items-center gap-1.5 rounded-full border border-primary/30 bg-primary/5 px-3 py-1 text-xs font-semibold text-primary">
                                            <i class="fas fa-hashtag text-[10px]"></i>
                                            <span id="pdv-sale-code">—</span>
                                        </span>
                                    </div>
                                    <div id="pdv-print-controls" class="flex flex-wrap items-center gap-2">
                                        <span class="text-[10px] font-semibold uppercase tracking-wide text-gray-400">Tipos de impressão</span>
                                        <button type="button" class="inline-flex items-center justify-between gap-3 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-print-type="venda" aria-pressed="true">
                                            <span class="flex items-center gap-1.5">
                                                <i class="fas fa-receipt text-[10px]"></i>
                                                <span class="uppercase tracking-wide text-[10px] text-gray-400">Venda</span>
                                            </span>
                                            <span data-print-mode-label="venda" class="text-xs font-semibold text-gray-700">Matricial</span>
                                        </button>
                                        <button type="button" class="inline-flex items-center justify-between gap-3 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-print-confirmation="venda" aria-pressed="true">
                                            <span class="flex items-center gap-1.5">
                                                <i class="fas fa-circle-question text-[10px]"></i>
                                                <span class="uppercase tracking-wide text-[10px] text-gray-400">Pergunta</span>
                                            </span>
                                            <span data-print-confirmation-label="venda" class="text-xs font-semibold text-gray-700">Perguntar</span>
                                        </button>
                                        <button type="button" id="pdv-fullscreen-toggle" class="inline-flex items-center justify-between gap-3 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-fullscreen-toggle="true" aria-pressed="false">
                                            <span class="flex items-center gap-1.5">
                                                <i class="fas fa-up-right-and-down-left-from-center text-[10px]"></i>
                                                <span class="uppercase tracking-wide text-[10px] text-gray-400">Tela cheia</span>
                                            </span>
                                            <span id="pdv-fullscreen-label" class="text-xs font-semibold text-gray-700">Ativar</span>
                                        </button>
                                        <button type="button" id="pdv-agent-update-button" class="inline-flex items-center justify-between gap-3 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20">
                                            <span class="flex items-center gap-1.5">
                                                <i class="fas fa-rotate-right text-[10px]"></i>
                                                <span class="uppercase tracking-wide text-[10px] text-gray-400">Agente</span>
                                            </span>
                                            <span class="text-xs font-semibold text-gray-700">Atualizar</span>
                                        </button>
                                    </div>
                                </div>
                                <p id="pdv-selected-info" class="text-sm text-gray-500">Configure o caixa para iniciar as vendas.</p>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600">
                                <p><span class="font-semibold text-gray-700">Empresa:</span> <span id="pdv-company-label">—</span></p>
                                <p><span class="font-semibold text-gray-700">PDV:</span> <span id="pdv-name-label">—</span></p>
                            </div>
                        </div>

                        <nav class="flex flex-wrap gap-2 border-b border-gray-200 pb-1 items-center justify-between" aria-label="Seções do PDV">
                            <div class="flex flex-wrap gap-2">
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-primary rounded-t" data-tab-target="pdv-tab" aria-disabled="true">PDV</button>
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-primary text-primary rounded-t" data-tab-target="caixa-tab">Caixa</button>
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-primary rounded-t" data-tab-target="sales-tab">Vendas</button>
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-primary rounded-t" data-tab-target="orcamentos-tab">Orçamentos</button>
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-primary rounded-t" data-tab-target="delivery-tab">Delivery</button>
                                <button type="button" class="pdv-tab-trigger px-3 py-2 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-primary rounded-t" data-tab-target="cliente-tab">Contas a receber</button>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <button type="button" id="ifood-open-orders-btn" class="relative px-3 py-1.5 text-xs font-semibold rounded-full border border-primary text-primary hover:bg-primary/10 transition">
                                    iFood
                                    <span id="ifood-notification-dot" class="hidden absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full bg-red-500"></span>
                                </button>
                                <span class="px-3 py-1.5 text-xs font-semibold rounded-full border border-amber-500 text-amber-600">99Food</span>
                                <span class="px-3 py-1.5 text-xs font-semibold rounded-full border border-emerald-500 text-emerald-600">UberEats</span>
                            </div>
                        </nav>

                        <div class="space-y-5">
                            <div data-tab-panel="pdv-tab" class="hidden space-y-5">
                                <div class="grid grid-cols-1 xl:grid-cols-3 gap-4 xl:gap-5">
                                    <div class="xl:col-span-2 space-y-5">
                                        <div class="rounded-xl border border-gray-200 p-5 space-y-5">
                                            <div class="space-y-4">
                                                <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                                                    <div class="md:col-span-4">
                                                        <label for="pdv-product-search" class="block text-sm font-semibold text-gray-700 mb-1">Pesquisar produtos</label>
                                                        <div class="relative">
                                                            <input id="pdv-product-search" type="search" placeholder="Busque por código interno, código de barras ou nome" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="off">
                                                            <div id="pdv-product-results" class="absolute left-0 right-0 top-full z-20 mt-2 hidden max-h-[400px] overflow-y-auto overflow-x-hidden rounded-xl border border-gray-200 bg-white shadow-lg"></div>
                                                        </div>
                                                        <p class="text-xs text-gray-500 mt-1">Os resultados são atualizados conforme a digitação, seguindo o mesmo critério de busca do site.</p>
                                                    </div>
                                                    <div>
                                                        <label for="pdv-seller" class="block text-sm font-semibold text-gray-700 mb-1">Vendedor</label>
                                                        <input id="pdv-seller" type="text" placeholder="Informe o código do vendedor" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" inputmode="numeric" autocomplete="off">
                                                        <p id="pdv-seller-feedback" class="text-xs text-gray-500 mt-1">Insira o vendedor.</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="pdv-selected-preview" class="rounded-lg border border-gray-200 bg-gray-50 p-4 flex gap-4">
                                                <div class="h-24 w-24 flex items-center justify-center rounded-md bg-white border border-gray-200 overflow-hidden">
                                                    <img id="pdv-selected-image" src="" alt="Pré-visualização do produto" class="h-full w-full object-contain hidden">
                                                    <span id="pdv-selected-placeholder" class="text-xs text-gray-400">Sem imagem</span>
                                                </div>
                                                <div class="flex-1 space-y-2">
                                                    <p id="pdv-selected-name" class="text-sm font-semibold text-gray-700">Nenhum produto selecionado.</p>
                                                    <p id="pdv-selected-sku" class="text-xs text-gray-500">Escolha um item para visualizar os detalhes.</p>
                                                    <div class="flex flex-wrap items-center gap-3 text-sm">
                                                        <span id="pdv-selected-price" class="text-base font-semibold text-gray-800">R$ 0,00</span>
                                                        <span id="pdv-selected-original-price" class="hidden text-xs text-gray-500 line-through">R$ 0,00</span>
                                                        <span id="pdv-selected-promo" class="hidden rounded-full bg-primary/10 px-2 py-0.5 text-xs font-semibold text-primary">Promoção ativa</span>
                                                    </div>
                                                    <p id="pdv-selected-general-warning" class="hidden text-[11px] font-medium text-amber-600">Vincule um cliente para aplicar a promoção geral deste item.</p>
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                                <div>
                                                    <span class="block text-sm font-medium text-gray-700">Valor do item</span>
                                                    <p id="pdv-item-value" class="text-lg font-semibold text-gray-800">R$ 0,00</p>
                                                </div>
                                                <div>
                                                    <label for="pdv-item-quantity" class="block text-sm font-medium text-gray-700 mb-1">Quantidade</label>
                                                    <div class="flex items-center gap-2">
                                                        <button type="button" class="quantity-button h-9 w-9 rounded-lg border border-gray-200 text-gray-600 hover:border-primary hover:text-primary" data-quantity-change="-1">
                                                            <i class="fas fa-minus"></i>
                                                            <span class="sr-only">Diminuir quantidade</span>
                                                        </button>
                                                        <input id="pdv-item-quantity" type="number" min="1" value="1" class="w-20 rounded-lg border border-gray-200 px-3 py-2 text-sm text-center focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                        <button type="button" class="quantity-button h-9 w-9 rounded-lg border border-gray-200 text-gray-600 hover:border-primary hover:text-primary" data-quantity-change="1">
                                                            <i class="fas fa-plus"></i>
                                                            <span class="sr-only">Aumentar quantidade</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div>
                                                    <span class="block text-sm font-medium text-gray-700">Valor total</span>
                                                    <p id="pdv-item-total" class="text-lg font-semibold text-gray-800">R$ 0,00</p>
                                                </div>
                                            </div>

                                            <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                                                <p class="text-xs text-gray-500">Confirme os dados e adicione o item à pré-visualização antes de registrar o pagamento.</p>
                                                <button id="pdv-add-item" type="button" class="inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">
                                                    <i class="fas fa-cart-plus"></i>
                                                    <span>Adicionar item</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <aside class="space-y-5">
                                            <div class="rounded-xl border border-gray-200 bg-gray-50 p-5 space-y-4">
                                                <div class="space-y-2">
                                                    <span class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Ações da venda</span>
                                                    <div class="grid grid-cols-1 gap-2 sm:grid-cols-2">
                                                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="delivery">
                                                            <i class="fas fa-truck text-[10px]"></i>
                                                            <span class="text-xs font-semibold text-gray-700">Delivery</span>
                                                        </button>
                                                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="orcamento">
                                                            <i class="fas fa-file-lines text-[10px]"></i>
                                                            <span class="text-xs font-semibold text-gray-700">Orçamento</span>
                                                        </button>
                                                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="importar-atendimento">
                                                            <i class="fas fa-paw text-[10px]"></i>
                                                            <span class="text-xs font-semibold text-gray-700">Importar atendimento</span>
                                                        </button>
                                                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="troca">
                                                            <i class="fas fa-right-left text-[10px]"></i>
                                                            <span class="text-xs font-semibold text-gray-700">Troca</span>
                                                        </button>
                                                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="solicitacao-transferencia">
                                                            <i class="fas fa-exchange-alt text-[10px]"></i>
                                                            <span class="text-xs font-semibold text-gray-700">Sol. Transferência</span>
                                                        </button>
                                                        <button id="pdv-open-customer" type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-primary hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/20" data-sale-action="customer">
                                                            <i class="fas fa-user-plus text-[10px]"></i>
                                                            <span id="pdv-open-customer-label" class="text-xs font-semibold text-gray-700">Adicionar cliente</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between">
                                                    <h3 class="text-base font-semibold text-gray-800">Itens da venda</h3>
                                                    <span id="pdv-items-count" class="text-xs font-semibold text-gray-500">0 itens</span>
                                                </div>
                                                <div class="space-y-3">
                                                    <div id="pdv-customer-summary-empty" class="rounded-lg border border-dashed border-gray-300 bg-white px-4 py-3 text-xs text-gray-500">
                                                        Vincule um cliente para aplicar promoções gerais e registrar o responsável pela compra.
                                                    </div>
                                                    <div id="pdv-customer-summary-info" class="hidden rounded-lg border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700">
                                                        <div class="flex items-start justify-between gap-3">
                                                            <div class="space-y-1">
                                                                <p id="pdv-customer-name" class="text-sm font-semibold text-gray-800">—</p>
                                                                <p id="pdv-customer-doc" class="text-xs text-gray-500">Documento: —</p>
                                                                <p id="pdv-customer-contact" class="text-xs text-gray-500">Contato: —</p>
                                                                <p id="pdv-customer-pet" class="hidden text-xs text-gray-500">Pet: —</p>
                                                            </div>
                                                            <button type="button" id="pdv-customer-remove" class="text-xs font-semibold text-red-500 transition hover:text-red-600">Remover</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="pdv-items-empty" class="rounded-lg border border-dashed border-gray-300 bg-white px-4 py-6 text-center text-sm text-gray-500">Nenhum item adicionado até o momento.</div>
                                                <ul id="pdv-items-list" class="hidden divide-y divide-gray-200"></ul>
                                                <div class="mt-4 border-t border-gray-200 pt-4">
                                                    <div class="flex items-center justify-between text-sm font-semibold text-gray-700">
                                                        <span>Total da venda</span>
                                                        <span id="pdv-items-total">R$ 0,00</span>
                                                    </div>
                                                    <button id="pdv-finalize-sale" type="button" class="mt-4 w-full rounded-lg bg-secondary px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-secondary/90 disabled:cursor-not-allowed disabled:opacity-60">
                                                        Finalizar venda
                                                    </button>
                                                </div>
                                            </div>
                                        </aside>
                                    </div>
                                </div>

                            <div data-tab-panel="caixa-tab" class="space-y-5">
                                <div class="grid grid-cols-1 xl:grid-cols-2 gap-4 xl:gap-5">
                                    <div class="space-y-5">
                                        <div class="rounded-xl border border-gray-200 p-5 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <h3 class="text-base font-semibold text-gray-800">Situação do caixa</h3>
                                                <span id="pdv-caixa-state-label" class="text-xs font-semibold text-gray-500">Caixa fechado</span>
                                            </div>
                                            <div id="pdv-caixa-actions" class="grid grid-cols-1 gap-3"></div>
                                            <div id="pdv-caixa-action-details" class="hidden space-y-4 border-t border-gray-200 pt-4">
                                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="pdv-action-values-wrapper">
                                                    <div>
                                                        <label for="pdv-action-amount" class="block text-sm font-medium text-gray-700 mb-1">Valor da operação</label>
                                                        <div class="relative">
                                                            <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500">R$</span>
                                                            <input type="number" min="0" step="0.01" id="pdv-action-amount" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm pl-9 focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="0,00">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <label for="pdv-opening-payment" class="block text-sm font-medium text-gray-700 mb-1">Meio de pagamento</label>
                                                        <select id="pdv-opening-payment" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                                                    </div>
                                                </div>
                                                <div id="pdv-caixa-motivo-wrapper" class="hidden">
                                                    <label for="pdv-caixa-motivo" class="block text-sm font-medium text-gray-700 mb-1">Motivo</label>
                                                    <textarea id="pdv-caixa-motivo" rows="2" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Descreva o motivo da movimentação"></textarea>
                                                </div>
                                                <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                                                    <p id="pdv-caixa-action-hint" class="text-xs text-gray-500">Informe os detalhes para registrar a operação.</p>
                                                    <button id="pdv-caixa-action-confirm" type="button" class="inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">
                                                        <i class="fas fa-check-circle"></i>
                                                        <span>Registrar</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="rounded-xl border border-gray-200 p-5 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <h3 class="text-base font-semibold text-gray-800">Meios de pagamento</h3>
                                                <button id="pdv-reset-payments" type="button" class="text-xs font-semibold text-primary hover:underline">Zerar valores</button>
                                            </div>
                                            <ul id="pdv-payment-list" class="space-y-3"></ul>
                                            <p class="text-xs text-gray-500">Atualize os valores conforme os recebimentos são registrados no caixa.</p>
                                        </div>
                                    </div>

                                    <div class="space-y-6">
                                        <div class="rounded-xl border border-gray-200 bg-gray-50 p-6 space-y-4">
                                            <div class="flex items-center justify-between gap-3">
                                                <h3 class="text-base font-semibold text-gray-800">Resumo financeiro</h3>
                                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-400">Pré-visualização matricial</span>
                                            </div>
                                            <div class="rounded-lg border border-dashed border-gray-300 bg-white p-4">
                                                <pre id="pdv-summary-print" class="whitespace-pre-wrap font-mono text-[11px] leading-6 text-gray-700">Selecione uma empresa e um PDV para visualizar os dados do caixa.</pre>
                                            </div>
                                            <p id="pdv-summary-last-move" class="text-xs text-gray-500">Nenhuma movimentação registrada.</p>
                                        </div>

                                        <div class="rounded-xl border border-gray-200 p-6 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <h3 class="text-base font-semibold text-gray-800">Histórico do caixa</h3>
                                                <button id="pdv-clear-history" type="button" class="text-xs font-semibold text-primary hover:underline">Limpar histórico</button>
                                            </div>
                                            <ul id="pdv-history-list" class="space-y-3 text-sm text-gray-600">
                                                <li id="pdv-history-empty" class="text-xs text-gray-400">Nenhuma movimentação registrada ainda.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div data-tab-panel="orcamentos-tab" class="hidden space-y-5">
                                <section class="rounded-xl border border-gray-200 bg-white p-6 space-y-6">
                                    <header class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
                                        <div>
                                            <h2 class="text-lg font-semibold text-gray-800">Orçamentos registrados</h2>
                                            <p class="text-sm text-gray-500">Visualize, importe ou gerencie os orçamentos salvos no PDV.</p>
                                        </div>
                                        <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
                                            <div class="flex flex-wrap items-center gap-2" id="pdv-budget-presets">
                                                <button type="button" data-budget-preset="hoje" class="rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary">Hoje</button>
                                                <button type="button" data-budget-preset="semana" class="rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary">Semana</button>
                                                <button type="button" data-budget-preset="mes" class="rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary">Mês</button>
                                                <button type="button" data-budget-preset="todos" class="rounded-full border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary">Todos</button>
                                            </div>
                                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                                <label for="pdv-budget-start" class="font-semibold">Período</label>
                                                <input type="date" id="pdv-budget-start" class="rounded border border-gray-200 px-2 py-1 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                                <span class="text-gray-400">até</span>
                                                <input type="date" id="pdv-budget-end" class="rounded border border-gray-200 px-2 py-1 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            </div>
                                        </div>
                                    </header>
                                    <div class="grid grid-cols-1 gap-6 lg:grid-cols-5">
                                        <section class="lg:col-span-2 space-y-4">
                                            <div class="flex items-center justify-between">
                                                <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500">Lista de orçamentos</h3>
                                                <span id="pdv-budget-count" class="text-xs font-semibold text-gray-500">0 registros</span>
                                            </div>
                                            <div class="rounded-xl border border-gray-200">
                                                <table class="min-w-full divide-y divide-gray-200 text-sm">
                                                    <thead class="bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500">
                                                        <tr>
                                                            <th scope="col" class="px-4 py-3">Código</th>
                                                            <th scope="col" class="px-4 py-3">Cliente</th>
                                                            <th scope="col" class="px-4 py-3">Validade</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="pdv-budget-list" class="divide-y divide-gray-100"></tbody>
                                                </table>
                                                <div id="pdv-budget-empty" class="hidden px-4 py-6 text-sm text-gray-500">Nenhum orçamento encontrado para o filtro selecionado.</div>
                                            </div>
                                        </section>
                                        <section class="lg:col-span-3 space-y-4">
                                            <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                                                <div>
                                                    <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500">Detalhes do orçamento</h3>
                                                    <p id="pdv-budget-details-hint" class="text-xs text-gray-500">Selecione um orçamento para visualizar os detalhes.</p>
                                                </div>
                                                <div class="flex flex-wrap gap-2">
                                                    <button id="pdv-budget-import" type="button" class="rounded-lg border border-gray-200 px-4 py-2 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary disabled:cursor-not-allowed disabled:opacity-60">Importar orçamento</button>
                                                    <button id="pdv-budget-print" type="button" class="rounded-lg border border-gray-200 px-4 py-2 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary disabled:cursor-not-allowed disabled:opacity-60">Imprimir orçamento</button>
                                                    <button id="pdv-budget-delete" type="button" class="rounded-lg border border-red-200 px-4 py-2 text-xs font-semibold text-red-600 transition hover:border-red-500 hover:text-red-700 disabled:cursor-not-allowed disabled:opacity-60">Excluir orçamento</button>
                                                </div>
                                            </div>
                                            <div id="pdv-budget-details" class="space-y-4 rounded-xl border border-gray-200 bg-white p-5">
                                                <div id="pdv-budget-info" class="space-y-2 text-sm text-gray-600">
                                                    <p><span class="font-semibold text-gray-700">Código:</span> <span id="pdv-budget-code">—</span></p>
                                                    <p><span class="font-semibold text-gray-700">Cliente:</span> <span id="pdv-budget-customer">—</span></p>
                                                    <p><span class="font-semibold text-gray-700">Validade:</span> <span id="pdv-budget-validity">—</span></p>
                                                    <p><span class="font-semibold text-gray-700">Situação:</span> <span id="pdv-budget-status">—</span></p>
                                                    <p><span class="font-semibold text-gray-700">Total:</span> <span id="pdv-budget-total">R$ 0,00</span></p>
                                                </div>
                                                <div class="overflow-x-auto">
                                                    <table class="min-w-full divide-y divide-gray-200 text-sm">
                                                        <thead class="bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500">
                                                            <tr>
                                                                <th scope="col" class="px-4 py-3">Cód. barras</th>
                                                                <th scope="col" class="px-4 py-3">Nome</th>
                                                                <th scope="col" class="px-4 py-3">Qtd</th>
                                                                <th scope="col" class="px-4 py-3">Valor uni.</th>
                                                                <th scope="col" class="px-4 py-3">Desconto</th>
                                                                <th scope="col" class="px-4 py-3">Valor total</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="pdv-budget-items" class="divide-y divide-gray-100"></tbody>
                                                    </table>
                                                    <div id="pdv-budget-items-empty" class="px-4 py-6 text-sm text-gray-500">Nenhum item selecionado.</div>
                                                </div>
                                            </div>
                                        </section>
                                    </div>
                                </section>
                            </div>
                            <div data-tab-panel="delivery-tab" class="hidden space-y-5">
                                <div class="rounded-xl border border-gray-200 bg-white p-6 space-y-4">
                                    <div class="flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between">
                                        <div>
                                            <h3 class="text-base font-semibold text-gray-800">Entregas registradas</h3>
                                            <p class="text-xs text-gray-500">Acompanhe o andamento das vendas realizadas via delivery.</p>
                                        </div>
                                        <div class="flex items-center gap-2 text-xs text-gray-500">
                                            <span class="inline-flex items-center gap-1 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 font-semibold uppercase tracking-wide">Status</span>
                                            <span>Registrado • Em separação • Em rota • Finalizado</span>
                                        </div>
                                    </div>
                                    <div id="pdv-delivery-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm text-gray-500">
                                        Nenhum delivery registrado até o momento.
                                    </div>
                                    <ul id="pdv-delivery-list" class="hidden space-y-4"></ul>
                                </div>
                            </div>
                            <div data-tab-panel="sales-tab" class="hidden space-y-5">
                                <div class="rounded-xl border border-gray-200 bg-white p-6 space-y-4">
                                    <div class="flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between">
                                        <div>
                                            <h3 class="text-base font-semibold text-gray-800">Vendas finalizadas</h3>
                                            <p class="text-xs text-gray-500">Consulte as vendas encerradas e seus detalhes.</p>
                                        </div>
                                        <div class="flex items-center gap-2 text-xs text-gray-500">
                                            <label for="pdv-sales-start" class="font-semibold">Período</label>
                                            <input type="date" id="pdv-sales-start" class="rounded border border-gray-200 px-2 py-1 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                            <span class="text-gray-400">até</span>
                                            <input type="date" id="pdv-sales-end" class="rounded border border-gray-200 px-2 py-1 text-xs focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        </div>
                                    </div>
                                    <div id="pdv-sales-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm text-gray-500">
                                        Nenhuma venda finalizada até o momento.
                                    </div>
                                    <ul id="pdv-sales-list" class="hidden space-y-4"></ul>
                                </div>
                            </div>
                            <div data-tab-panel="cliente-tab" class="hidden space-y-5">
                                <section class="rounded-xl border border-gray-200 bg-white p-4 space-y-4">
                                    <div class="flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between">
                                        <div class="space-y-1">
                                            <h3 class="text-sm font-semibold text-gray-800">Contas a receber por cliente</h3>
                                            <p class="text-[11px] text-gray-500">Localize o cliente pelo CPF/CNPJ, celular ou e-mail e acompanhe rapidamente as pendências.</p>
                                        </div>
                                        <div class="w-full lg:w-64">
                                            <label for="pdv-receivables-search" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Buscar cliente</label>
                                            <div class="relative mt-1">
                                                <span class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
                                                    <i class="fas fa-search text-[11px]"></i>
                                                </span>
                                                <input id="pdv-receivables-search" type="search" placeholder="CPF, CNPJ, celular ou e-mail" class="w-full rounded-lg border border-gray-200 bg-white py-1.5 pl-8 pr-3 text-sm text-gray-700 focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="off">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="pdv-receivables-search-wrapper" class="space-y-2">
                                        <div id="pdv-receivables-search-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-3 py-2 text-xs text-gray-500">
                                            Buscando clientes...
                                        </div>
                                        <div id="pdv-receivables-search-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-3 py-2 text-xs text-gray-500">
                                            Digite para buscar clientes.
                                        </div>
                                        <div id="pdv-receivables-search-results" class="grid gap-2 sm:grid-cols-2"></div>
                                    </div>
                                    <div id="pdv-receivables-selected" class="hidden rounded-lg border border-gray-200 bg-gray-50 p-3">
                                        <div class="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between">
                                            <div class="space-y-0.5">
                                                <p id="pdv-receivables-customer-name" class="text-sm font-semibold text-gray-800">—</p>
                                                <p id="pdv-receivables-customer-doc" class="text-xs text-gray-500">Documento: —</p>
                                                <p id="pdv-receivables-customer-contact" class="text-xs text-gray-500">Contato: —</p>
                                            </div>
                                            <button type="button" id="pdv-receivables-clear" class="self-start rounded-full border border-gray-200 px-3 py-1 text-[11px] font-semibold text-gray-600 transition hover:border-rose-300 hover:text-rose-600">Remover seleção</button>
                                        </div>
                                        <dl class="mt-3 grid grid-cols-1 gap-2 text-xs text-gray-600 sm:grid-cols-2">
                                            <div class="rounded-lg border border-gray-200 bg-white px-3 py-2">
                                                <dt class="text-[10px] font-semibold uppercase tracking-wide text-gray-400">Limite de crédito</dt>
                                                <dd id="pdv-receivables-customer-limit" class="mt-1 text-sm font-semibold text-gray-700">—</dd>
                                            </div>
                                            <div class="rounded-lg border border-gray-200 bg-white px-3 py-2">
                                                <dt class="text-[10px] font-semibold uppercase tracking-wide text-gray-400">Pendências de crediário</dt>
                                                <dd id="pdv-receivables-customer-pending" class="mt-1 text-sm font-semibold text-gray-700">R$ 0,00</dd>
                                            </div>
                                        </dl>
                                    </div>
                                </section>
                                <section class="rounded-xl border border-gray-200 bg-white p-4 space-y-3">
                                    <div class="flex flex-col gap-1.5 sm:flex-row sm:items-center sm:justify-between">
                                        <div>
                                            <h4 class="text-sm font-semibold text-gray-800">Pendências do crediário</h4>
                                            <p class="text-[11px] text-gray-500">Visualize rapidamente as parcelas do cliente selecionado.</p>
                                        </div>
                                        <div class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-[11px] font-semibold text-gray-600">
                                            <span>Total em aberto:</span>
                                            <span id="pdv-receivables-total" class="text-sm text-gray-800">R$ 0,00</span>
                                        </div>
                                    </div>
                                    <div id="pdv-receivables-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-3 py-2 text-xs text-gray-500">
                                        Carregando pendências do cliente selecionado...
                                    </div>
                                    <div id="pdv-receivables-error" class="hidden rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-600"></div>
                                    <div id="pdv-receivables-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-3 py-2 text-xs text-gray-500">
                                        Selecione um cliente para visualizar as pendências de crediário.
                                    </div>
                                    <div id="pdv-receivables-actions" class="hidden flex flex-col gap-2 rounded-lg border border-primary/20 bg-primary/5 px-3 py-2 text-sm text-gray-700 sm:flex-row sm:items-center sm:justify-between">
                                        <div class="flex flex-wrap items-center gap-2">
                                            <span id="pdv-receivables-selected-count" class="font-semibold text-gray-800">0 parcelas selecionadas</span>
                                            <span class="text-xs text-gray-500">Total</span>
                                            <span id="pdv-receivables-selected-total" class="font-semibold text-gray-800">R$ 0,00</span>
                                        </div>
                                        <button type="button" id="pdv-receivables-pay" class="inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60">
                                            <i class="fas fa-cash-register text-xs"></i>
                                            <span>Receber selecionadas</span>
                                        </button>
                                    </div>
                                    <div id="pdv-receivables-table" class="hidden overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 text-sm">
                                            <thead class="bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500">
                                                <tr>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">
                                                        <span class="sr-only">Selecionar</span>
                                                    </th>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">Venda</th>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">Parcela</th>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">Vencimento</th>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">Valor</th>
                                                    <th scope="col" class="px-3 py-2 text-left font-semibold">Forma de pagamento</th>
                                                </tr>
                                            </thead>
                                            <tbody id="pdv-receivables-list" class="divide-y divide-gray-100 text-gray-600"></tbody>
                                        </table>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <div id="admin-footer-placeholder"></div>
    <div id="modal-placeholder"></div>
    <div id="confirm-modal-placeholder"></div>

    <div id="pdv-seller-modal" class="fixed inset-0 z-[90] hidden" aria-hidden="true">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" data-seller-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-14 w-full max-w-xl px-4">
            <div class="overflow-hidden rounded-2xl bg-white shadow-2xl ring-1 ring-black/5">
                <div class="flex items-center justify-between border-b border-gray-200 px-5 py-4">
                    <div>
                        <h2 class="text-lg font-semibold text-gray-800">Buscar vendedor</h2>
                        <p class="text-sm text-gray-500">Digite o nome do vendedor ou use * para listar todos.</p>
                    </div>
                    <button type="button" id="pdv-seller-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de vendedores">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-5 px-5 py-5">
                    <div class="space-y-2">
                        <label for="pdv-seller-search" class="block text-sm font-semibold text-gray-700">Pesquisar vendedor</label>
                        <input id="pdv-seller-search" type="search" placeholder="Nome do vendedor ou * para listar todos" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="off">
                        <p class="text-xs text-gray-500">Digite letras para buscar pelo nome. Use * para mostrar todos os vendedores cadastrados.</p>
                    </div>
                    <div class="space-y-2">
                        <div id="pdv-seller-results-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Carregando vendedores...</div>
                        <div id="pdv-seller-results-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Digite o nome do vendedor ou * para listar todos.</div>
                        <div id="pdv-seller-results" class="max-h-80 space-y-2 overflow-y-auto pr-1"></div>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-2 border-t border-gray-200 bg-gray-50 px-5 py-4">
                    <button type="button" id="pdv-seller-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-customer-modal" class="fixed inset-0 z-[90] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-pdv-customer-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-16 w-full max-w-3xl overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Selecionar cliente</h2>
                    <p class="text-sm text-gray-500">Localize o cliente e, se desejar, associe um pet à venda.</p>
                </div>
                <div class="flex items-center gap-2">
                    <button type="button" id="pdv-customer-register" class="inline-flex items-center gap-2 rounded-lg border border-transparent bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">
                        <i class="fas fa-user-plus text-xs"></i>
                        Cadastrar
                    </button>
                    <button type="button" id="pdv-customer-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de clientes">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="px-6 pt-4">
                <div class="flex flex-wrap gap-2 border-b border-gray-200 pb-3" role="tablist">
                    <button type="button" class="rounded-lg border border-primary px-3 py-1.5 text-sm font-semibold text-primary" data-pdv-customer-tab="cliente" aria-selected="true">Cliente</button>
                    <button type="button" class="rounded-lg border border-transparent px-3 py-1.5 text-sm font-semibold text-gray-500" data-pdv-customer-tab="pet" aria-selected="false">Pet</button>
                </div>
            </div>
            <div class="space-y-6 px-6 py-5">
                <div data-pdv-customer-panel="cliente" class="space-y-5">
                    <div class="space-y-2">
                        <label for="pdv-customer-search" class="block text-sm font-semibold text-gray-700">Buscar cliente</label>
                        <input id="pdv-customer-search" type="search" placeholder="CPF, CNPJ, e-mail, celular ou telefone" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="off">
                        <p class="text-xs text-gray-500">Digite o nome ou documento do cliente para realizar a busca.</p>
                    </div>
                    <div class="space-y-2">
                        <div id="pdv-customer-results-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Buscando clientes...</div>
                        <div id="pdv-customer-results-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Digite para buscar clientes.</div>
                        <div id="pdv-customer-results-table" class="hidden overflow-hidden rounded-lg border border-gray-200">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-100 text-left text-[11px] leading-[1.35] text-gray-700">
                                    <thead class="bg-gray-50 text-left text-[10px] uppercase tracking-wide text-gray-500">
                                        <tr>
                                            <th scope="col" class="px-3 py-2 font-semibold">Codigo</th>
                                            <th scope="col" class="px-3 py-2 font-semibold">Nome</th>
                                            <th scope="col" class="px-3 py-2 font-semibold">CPF</th>
                                            <th scope="col" class="px-3 py-2 font-semibold">Celular</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pdv-customer-results" class="divide-y divide-gray-100 bg-white"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div data-pdv-customer-panel="pet" class="hidden space-y-4">
                    <p class="text-sm text-gray-600">Selecione um cliente para visualizar os pets vinculados.</p>
                    <div id="pdv-customer-pets-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Carregando pets do cliente...</div>
                    <div id="pdv-customer-pets-empty" class="rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">Nenhum pet disponível.</div>
                    <div id="pdv-customer-pets" class="space-y-2"></div>
                </div>
            </div>
            <div class="flex flex-col gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4 sm:flex-row sm:items-center sm:justify-between">
                <button type="button" id="pdv-customer-clear" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-60">Limpar seleção</button>
                <div class="flex items-center gap-2">
                    <button type="button" id="pdv-customer-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                    <button type="button" id="pdv-customer-confirm" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60">Vincular cliente</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-customer-register-modal" class="fixed inset-0 z-[120] hidden" aria-hidden="true">
        <div class="absolute inset-0 bg-slate-900/60" data-customer-register-dismiss="backdrop"></div>
        <div class="relative mx-auto flex min-h-full w-full items-start justify-center px-3 py-6 sm:items-center">
            <div class="relative flex w-full max-w-5xl transform-gpu flex-col overflow-hidden rounded-2xl bg-white shadow-2xl transition-all duration-200 ease-out max-h-[90vh]" data-customer-frame-shell>
                <header class="flex flex-col gap-2 border-b border-gray-100 px-5 py-4 sm:flex-row sm:items-start sm:justify-between">
                    <div class="space-y-1">
                        <span class="text-[11px] font-semibold uppercase tracking-wide text-primary">Cadastro de cliente</span>
                        <h3 class="text-lg font-semibold text-gray-900">Adicionar novo cliente</h3>
                        <p class="text-sm text-gray-500">Abra o formulário completo para cadastrar o cliente sem sair do PDV.</p>
                    </div>
                    <button type="button" class="inline-flex items-center justify-center rounded-full border border-gray-200 p-2 text-gray-500 transition hover:bg-gray-50 hover:text-gray-700" data-customer-register-dismiss="close" aria-label="Fechar cadastro de cliente">
                        <i class="fas fa-times"></i>
                    </button>
                </header>
                <div class="flex-1 overflow-hidden bg-gray-50">
                    <div data-customer-frame-loading class="flex h-full flex-col items-center justify-center gap-3 px-6 py-10 text-center text-sm text-gray-600">
                        <i class="fas fa-circle-notch fa-spin text-xl text-primary"></i>
                        <p>
                            Carregando cadastro de cliente...
                            <span class="mt-1 block text-xs text-gray-500">Isso pode levar alguns instantes.</span>
                        </p>
                    </div>
                    <iframe data-customer-frame title="Cadastro de cliente" class="hidden h-[75vh] min-h-[420px] w-full border-0 bg-white" allow="clipboard-write"></iframe>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-finalize-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-pdv-finalize-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-10 h-[85vh] w-full max-w-5xl overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Finalizar venda</h2>
                    <p class="text-sm text-gray-500">Defina as formas de pagamento e confirme o fechamento da venda.</p>
                </div>
                <button type="button" id="pdv-finalize-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de finalização">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="grid h-[calc(100%-64px)] grid-cols-1 divide-y divide-gray-200 md:grid-cols-2 md:divide-x md:divide-y-0">
                <section class="overflow-y-auto px-6 py-5">
                    <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500">Formas de pagamento</h3>
                    <p class="mt-1 text-xs text-gray-500">Escolha uma forma de pagamento para informar o valor recebido.</p>
                    <ul id="pdv-sale-methods" class="mt-4 space-y-3"></ul>
                </section>
                <section class="flex h-full flex-col overflow-hidden px-6 py-5">
                    <div class="flex-1 overflow-y-auto">
                        <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500">Pagamentos selecionados</h3>
                        <ul id="pdv-sale-payments-preview" class="mt-3 space-y-2 text-sm text-gray-700"></ul>
                        <div id="pdv-sale-payments-empty" class="mt-3 rounded-lg border border-dashed border-gray-200 bg-gray-50 px-4 py-6 text-center text-sm text-gray-500">
                            Nenhum pagamento informado ainda.
                        </div>
                    </div>
                    <div class="mt-5 space-y-4 border-t border-gray-200 pt-4">
                        <div class="flex flex-col gap-2 text-sm text-gray-700">
                            <div class="flex items-center justify-between">
                                <span>Total</span>
                                <span id="pdv-sale-total" class="font-semibold">R$ 0,00</span>
                            </div>
                            <div class="flex items-center justify-between text-gray-500">
                                <span>Descontos</span>
                                <span id="pdv-sale-discount">R$ 0,00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>Pago</span>
                                <span id="pdv-sale-paid" class="font-semibold">R$ 0,00</span>
                            </div>
                            <p id="pdv-sale-difference" class="text-xs font-medium text-amber-600"></p>
                        </div>
                        <div id="pdv-receivables-residual" class="hidden rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900">
                            <div class="flex items-center justify-between gap-3">
                                <div>
                                    <span class="text-[11px] font-semibold uppercase tracking-wide text-amber-700">Resíduo pendente</span>
                                    <p id="pdv-receivables-residual-hint" class="mt-1 text-xs text-amber-700">Defina o novo vencimento para manter o saldo disponível.</p>
                                </div>
                                <span id="pdv-receivables-residual-amount" class="text-sm font-semibold text-amber-900">R$ 0,00</span>
                            </div>
                            <label class="mt-3 block text-xs font-semibold text-amber-800" for="pdv-receivables-residual-due">
                                Novo vencimento do resíduo
                            </label>
                            <input id="pdv-receivables-residual-due" type="date" class="mt-1 w-full rounded-lg border border-amber-200 px-3 py-2 text-sm text-amber-900 focus:border-amber-400 focus:ring-2 focus:ring-amber-200">
                            <p id="pdv-receivables-residual-error" class="mt-2 hidden text-xs font-semibold text-amber-700"></p>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <button id="pdv-sale-adjust" type="button" class="rounded border border-gray-200 px-3 py-1 font-semibold text-gray-600 transition hover:border-primary hover:text-primary">
                                Acréscimo/Desconto
                            </button>
                            <button id="pdv-sale-item-adjust" type="button" class="rounded border border-gray-200 px-3 py-1 font-semibold text-gray-600 transition hover:border-primary hover:text-primary">
                                Acréscimo/Desconto Item
                            </button>
                        </div>
                        <div class="flex items-center justify-between gap-3">
                            <button id="pdv-sale-back" type="button" class="w-full rounded-lg border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">
                                Retornar
                            </button>
                            <button id="pdv-sale-confirm" type="button" class="w-full rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60">
                                Finalizar venda
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <div id="pdv-crediario-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-crediario-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-10 flex h-[85vh] w-full max-w-[calc(64rem+120px)] flex-col overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Crediário</h2>
                    <p class="text-sm text-gray-500">Configure as parcelas e vincule o cliente para registrar o crediário desta venda.</p>
                </div>
                <button type="button" id="pdv-crediario-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de crediário">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex-1 flex flex-col gap-5 overflow-y-auto px-6 py-5">
                <section class="rounded-2xl border border-gray-200 bg-white/80 p-5 shadow-sm">
                    <div class="flex min-w-0 flex-col gap-4">
                        <div class="flex min-w-0 flex-col gap-3">
                            <label class="text-sm font-semibold text-gray-700" for="pdv-crediario-customer-select">Cliente vinculado</label>
                            <div class="flex flex-col gap-3 rounded-2xl border border-gray-200 bg-gray-50/70 p-4 sm:flex-row sm:items-center sm:gap-4">
                                <div class="min-w-0 flex-1 space-y-1">
                                    <p id="pdv-crediario-customer-name" class="text-base font-semibold leading-5 text-gray-800 break-words">Nenhum cliente selecionado</p>
                                    <p id="pdv-crediario-customer-doc" class="text-xs text-gray-500">Selecione um cliente para continuar.</p>
                                </div>
                                <button type="button" id="pdv-crediario-customer-select" class="inline-flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-600 transition hover:border-primary hover:text-primary">
                                    <i class="fas fa-user-plus text-[11px]"></i>
                                    <span>Selecionar cliente</span>
                                </button>
                            </div>
                        </div>
                        <div class="grid gap-2 sm:grid-cols-3 sm:gap-3">
                            <div class="rounded-xl border border-gray-200 bg-white px-4 py-3 text-center shadow-sm">
                                <span class="block text-[11px] font-semibold uppercase tracking-wide text-gray-400">Limite de crédito</span>
                                <p id="pdv-crediario-limit" class="mt-1 text-sm font-semibold text-gray-800">—</p>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white px-4 py-3 text-center shadow-sm">
                                <span class="block text-[11px] font-semibold uppercase tracking-wide text-gray-400">Pendências</span>
                                <p id="pdv-crediario-pending" class="mt-1 text-sm font-semibold text-gray-800">—</p>
                            </div>
                            <div class="rounded-xl border border-gray-200 bg-white px-4 py-3 text-center shadow-sm">
                                <span class="block text-[11px] font-semibold uppercase tracking-wide text-gray-400">Fidelidade</span>
                                <p id="pdv-crediario-fidelity" class="mt-1 text-sm font-semibold text-gray-800">Em desenvolvimento</p>
                            </div>
                        </div>
                    </div>
                    <div id="pdv-crediario-error" class="mt-4 hidden rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-600"></div>
                </section>
                <section class="grid gap-4 lg:grid-cols-[minmax(0,1.05fr)_minmax(0,0.95fr)] lg:gap-5">
                    <div class="space-y-4 rounded-2xl border border-gray-200 bg-white p-4 shadow-sm">
                        <div class="grid grid-cols-1 gap-3 md:grid-cols-12 md:items-end">
                            <div class="md:col-span-4">
                                <label for="pdv-crediario-method" class="block text-sm font-semibold text-gray-700">Meio de pagamento (liquidação)</label>
                                <select id="pdv-crediario-method" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20"></select>
                            </div>
                            <div class="md:col-span-3">
                                <label for="pdv-crediario-date" class="block text-sm font-semibold text-gray-700">Data de pagamento</label>
                                <input id="pdv-crediario-date" type="date" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                            <div class="md:col-span-2">
                                <label for="pdv-crediario-parcela" class="block text-sm font-semibold text-gray-700">Parcela</label>
                                <input id="pdv-crediario-parcela" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-600 focus:border-primary focus:ring-2 focus:ring-primary/20" readonly>
                            </div>
                            <div class="md:col-span-3">
                                <label for="pdv-crediario-value" class="block text-sm font-semibold text-gray-700">Valor</label>
                                <div class="mt-1 flex items-center gap-2">
                                    <input id="pdv-crediario-value" type="number" min="0" step="0.01" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="0,00">
                                    <button type="button" id="pdv-crediario-add" class="inline-flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-white transition hover:bg-secondary" aria-label="Adicionar parcela">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500">Distribua o valor restante da venda informando as parcelas que serão recebidas no crediário.</p>
                        <div class="flex items-center justify-between rounded-xl border border-dashed border-primary/30 bg-primary/5 px-4 py-3">
                            <div class="flex flex-col">
                                <span class="text-[11px] font-semibold uppercase tracking-wide text-gray-500">Restante da venda</span>
                                <span id="pdv-crediario-remaining-status" class="text-xs text-gray-500">Distribua o valor para prosseguir.</span>
                            </div>
                            <span id="pdv-crediario-remaining" class="text-base font-semibold text-gray-800">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="flex flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm">
                        <div class="flex flex-col gap-1 border-b border-gray-200 bg-gray-50 px-5 py-4 sm:flex-row sm:items-center sm:justify-between">
                            <h3 class="text-sm font-semibold uppercase tracking-wide text-gray-500">Parcelas cadastradas</h3>
                            <span id="pdv-crediario-total" class="text-sm font-semibold text-gray-700">Total: R$ 0,00</span>
                        </div>
                        <div id="pdv-crediario-list-empty" class="px-5 py-8 text-center text-sm text-gray-500">Nenhuma parcela adicionada.</div>
                        <div id="pdv-crediario-list-head" class="hidden px-5 pt-4 text-[11px] font-semibold uppercase tracking-[0.08em] text-gray-400">
                            <span>Resumo das parcelas</span>
                        </div>
                        <div class="px-5 pb-5">
                            <ul id="pdv-crediario-list" class="hidden grid gap-2.5 sm:grid-cols-2"></ul>
                        </div>
                    </div>
                </section>
            </div>
            <div class="flex flex-col gap-3 border-t border-gray-200 bg-gray-50 px-5 py-4 sm:flex-row sm:items-center sm:justify-between">
                <button type="button" id="pdv-crediario-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                <button type="button" id="pdv-crediario-confirm" class="rounded-lg bg-primary px-5 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60">Adicionar crediário</button>
            </div>
        </div>
    </div>

    <div id="pdv-appointment-modal" class="fixed inset-0 z-[55] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-appointment-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-10 flex h-[85vh] w-full max-w-5xl flex-col overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Importar atendimento</h2>
                    <p class="text-sm text-gray-500">Localize o atendimento na agenda para importar os serviços e registrar o pagamento.</p>
                </div>
                <button type="button" id="pdv-appointment-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de atendimentos">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto" data-appointment-scroll-container>
                <div class="sticky top-0 z-10 border-b border-gray-100 bg-white/95 px-6 py-5 shadow-sm supports-[backdrop-filter]:backdrop-blur-sm">
                    <div class="space-y-4">
                        <div class="rounded-xl border border-gray-200 bg-gray-50 p-4">
                            <div id="pdv-appointment-presets" class="flex flex-wrap items-center gap-2">
                                <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-preset="today">
                                    Hoje
                                </button>
                                <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-preset="week">
                                    Semana
                                </button>
                                <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-preset="month">
                                    Mês
                                </button>
                                <span class="hidden h-4 w-px bg-gray-300 sm:inline-block"></span>
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700" for="pdv-appointment-start">
                                    <span class="text-xs font-semibold uppercase tracking-wide text-gray-500">Início</span>
                                    <input id="pdv-appointment-start" type="date" class="w-32 rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                                </label>
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700" for="pdv-appointment-end">
                                    <span class="text-xs font-semibold uppercase tracking-wide text-gray-500">Fim</span>
                                    <input id="pdv-appointment-end" type="date" class="w-32 rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                                </label>
                                <button type="button" id="pdv-appointment-apply" class="inline-flex items-center gap-2 rounded-full bg-primary px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-secondary">
                                    <i class="fas fa-filter"></i>
                                    <span>Aplicar</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                            <div class="flex flex-col gap-2">
                                <p id="pdv-appointment-count" class="text-sm text-gray-600">0 atendimentos encontrados.</p>
                                <div id="pdv-appointment-status-filters" class="flex flex-wrap items-center gap-2">
                                    <button type="button" class="inline-flex items-center gap-2 rounded-full border border-primary bg-primary/10 px-3 py-1.5 text-xs font-semibold text-primary transition hover:border-primary hover:text-primary" data-appointment-status="todos" aria-pressed="true">Todos</button>
                                    <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-status="agendado" aria-pressed="false">Agendado</button>
                                    <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-status="em_espera" aria-pressed="false">Em Espera</button>
                                    <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-status="em_atendimento" aria-pressed="false">Em Atendimento</button>
                                    <button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary" data-appointment-status="concluido" aria-pressed="false">Concluído</button>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <span id="pdv-appointment-selected-count" class="text-xs font-semibold text-gray-500">Nenhum atendimento selecionado.</span>
                                <button type="button" id="pdv-appointment-import-selected" class="inline-flex items-center gap-2 rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60" disabled>
                                    <i class="fas fa-file-import"></i>
                                    <span>Importar selecionados</span>
                                </button>
                                <button type="button" id="pdv-appointment-reload" class="inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:border-primary hover:text-primary">
                                    <i class="fas fa-rotate"></i>
                                    <span>Atualizar lista</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="px-6 py-5">
                    <div class="space-y-3">
                        <div id="pdv-appointment-loading" class="hidden rounded-xl border border-dashed border-gray-300 bg-white px-4 py-4 text-sm text-gray-500">Carregando atendimentos da agenda...</div>
                        <div id="pdv-appointment-empty" class="hidden rounded-xl border border-dashed border-gray-300 bg-white px-4 py-4 text-sm text-gray-500">Nenhum atendimento encontrado para o período selecionado.</div>
                        <div id="pdv-appointment-list" class="grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-budget-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-budget-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-32 w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Salvar orçamento</h2>
                    <p class="text-sm text-gray-500">Informe por quantos dias o orçamento será válido.</p>
                </div>
                <button type="button" id="pdv-budget-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de orçamento">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4 px-6 py-5">
                <label for="pdv-budget-validity" class="block text-sm font-semibold text-gray-700">Validade do orçamento (em dias)</label>
                <input type="number" id="pdv-budget-validity" min="1" max="365" value="7" class="w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Ex.: 7">
                <p id="pdv-budget-error" class="hidden text-sm font-semibold text-red-600">Informe um período de 1 a 365 dias.</p>
            </div>
            <div class="flex items-center justify-between gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4">
                <button type="button" id="pdv-budget-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                <button type="button" id="pdv-budget-confirm" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">Continuar</button>
            </div>
        </div>
    </div>

    <div id="pdv-fiscal-status-modal" class="fixed inset-0 z-[70] hidden">
        <div class="absolute inset-0 bg-slate-900/60"></div>
        <div class="relative mx-auto mt-32 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl">
            <div class="flex justify-center">
                <div class="flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-primary">
                    <i class="fas fa-circle-notch animate-spin text-xl"></i>
                </div>
            </div>
            <h2 id="pdv-fiscal-status-title" class="mt-4 text-center text-lg font-semibold text-gray-800">
                Emitindo nota fiscal...
            </h2>
            <p class="mt-2 text-center text-sm text-gray-500">
                Aguarde enquanto concluímos as etapas de emissão fiscal.
            </p>
            <ul id="pdv-fiscal-status-steps" class="mt-6 space-y-3 text-left">
                <li data-fiscal-step="montando" class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-600">
                    <div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-400" data-fiscal-step-icon>
                        <i class="fas fa-circle text-xs"></i>
                    </div>
                    <div class="min-w-0">
                        <p class="font-medium">Montando XML</p>
                        <p class="text-xs text-gray-400" data-fiscal-step-status>Aguardando...</p>
                    </div>
                </li>
                <li data-fiscal-step="assinando" class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-600">
                    <div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-400" data-fiscal-step-icon>
                        <i class="fas fa-circle text-xs"></i>
                    </div>
                    <div class="min-w-0">
                        <p class="font-medium">Assinando XML</p>
                        <p class="text-xs text-gray-400" data-fiscal-step-status>Aguardando...</p>
                    </div>
                </li>
                <li data-fiscal-step="transmitindo" class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-600">
                    <div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-400" data-fiscal-step-icon>
                        <i class="fas fa-circle text-xs"></i>
                    </div>
                    <div class="min-w-0">
                        <p class="font-medium">Transmitindo XML</p>
                        <p class="text-xs text-gray-400" data-fiscal-step-status>Aguardando...</p>
                    </div>
                </li>
            </ul>
            <p class="mt-6 text-center text-xs text-gray-400">
                Não feche esta janela até que a emissão seja concluída.
            </p>
        </div>
    </div>

    <div id="pdv-transfer-modal" class="fixed inset-0 z-[65] hidden">
        <div id="pdv-transfer-modal-backdrop" class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm" data-transfer-dismiss="backdrop"></div>
        <div class="relative mx-auto flex min-h-full w-full items-start justify-center px-3 py-6 sm:items-center">
            <div class="relative flex w-full max-w-[1352px] transform-gpu flex-col overflow-hidden rounded-2xl bg-white text-[12px] leading-[1.35] shadow-2xl transition-all duration-200 ease-out max-h-[90vh] min-h-0">
                <div class="flex flex-col gap-2.5 border-b border-gray-100 px-5 py-4 sm:flex-row sm:items-start sm:justify-between">
                    <div>
                        <span class="inline-flex items-center gap-1.5 rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-primary">
                            <i class="fas fa-arrow-right-arrow-left"></i>
                            Transferência de estoque
                        </span>
                        <h2 class="mt-1.5 text-[18px] font-semibold text-gray-900">Solicitar transferência</h2>
                        <p class="mt-1 max-w-2xl text-[11px] text-gray-600">Defina depósitos, responsável e itens para enviar a solicitação para aprovação.</p>
                    </div>
                    <button type="button" id="pdv-transfer-close" class="inline-flex items-center justify-center rounded-full border border-gray-200 p-1.5 text-gray-500 transition hover:bg-gray-50 hover:text-gray-700" aria-label="Fechar modal de transferência">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto px-5 py-5">
                    <div id="pdv-transfer-loading" class="mb-5 hidden rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-[11px] font-medium text-gray-600">
                        Carregando dados necessários para a solicitação de transferência...
                    </div>
                    <div id="pdv-transfer-form" class="space-y-5">
                        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                            <div>
                                <label for="pdv-transfer-date" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Data da solicitação</label>
                                <input type="date" id="pdv-transfer-date" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                            <div>
                                <label for="pdv-transfer-responsible" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Responsável</label>
                                <select id="pdv-transfer-responsible" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <option value="">Selecione o responsável</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-5 lg:grid-cols-2">
                            <div class="space-y-3">
                                <div>
                                    <label for="pdv-transfer-origin-company" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Empresa de origem</label>
                                    <select id="pdv-transfer-origin-company" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <option value="">Selecione a empresa de origem</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="pdv-transfer-origin-deposit" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Depósito de origem</label>
                                    <select id="pdv-transfer-origin-deposit" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <option value="">Selecione o depósito de origem</option>
                                    </select>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label for="pdv-transfer-destination-company" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Empresa de destino</label>
                                    <select id="pdv-transfer-destination-company" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <option value="">Selecione a empresa de destino</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="pdv-transfer-destination-deposit" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Depósito de destino</label>
                                    <select id="pdv-transfer-destination-deposit" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                        <option value="">Selecione o depósito de destino</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                            <div>
                                <label for="pdv-transfer-reference" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Documento de referência</label>
                                <input type="text" id="pdv-transfer-reference" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Ex.: Ordem de serviço, NF-e">
                            </div>
                            <div>
                                <label for="pdv-transfer-observations" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Observações</label>
                                <textarea id="pdv-transfer-observations" rows="2" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Informações adicionais sobre a transferência"></textarea>
                            </div>
                        </div>
                        <div class="space-y-4 rounded-xl border border-gray-200 bg-gray-50/60 p-4">
                            <div class="flex flex-col gap-4 lg:flex-row lg:items-end">
                                <div class="lg:flex-1">
                                    <label for="pdv-transfer-product-search" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Buscar produto</label>
                                    <div class="relative mt-1">
                                        <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"><i class="fas fa-search"></i></span>
                                        <input type="text" id="pdv-transfer-product-search" class="w-full rounded-lg border border-gray-200 px-3 py-2 pl-9 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Digite nome, código ou código de barras">
                                    </div>
                                    <p class="mt-2 text-[11px] text-gray-500">Digite ao menos 2 caracteres para pesquisar.</p>
                                </div>
                                <div>
                                    <label for="pdv-transfer-product-quantity" class="block text-[11px] font-semibold uppercase tracking-wide text-gray-500">Quantidade</label>
                                    <input type="number" min="1" id="pdv-transfer-product-quantity" class="mt-1 w-24 rounded-lg border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20" value="1">
                                </div>
                                <div class="flex items-end">
                                    <button type="button" id="pdv-transfer-add-product" class="inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-[11px] font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-primary/90">
                                        <i class="fas fa-plus"></i>
                                        <span>Adicionar</span>
                                    </button>
                                </div>
                            </div>
                            <div id="pdv-transfer-product-feedback" class="text-[11px] text-gray-600">Selecione um produto nos resultados para adicioná-lo à lista.</div>
                            <div id="pdv-transfer-product-results" class="hidden max-h-48 overflow-y-auto rounded-lg border border-gray-200 bg-white"></div>
                            <div class="space-y-3">
                                <div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between">
                                    <h3 class="text-[12px] font-semibold text-gray-900">Itens selecionados</h3>
                                    <span id="pdv-transfer-items-count" class="text-[11px] font-semibold uppercase tracking-wide text-gray-500">0 itens</span>
                                </div>
                                <div id="pdv-transfer-items-empty" class="rounded-lg border border-dashed border-gray-300 bg-white px-4 py-6 text-center text-[11px] text-gray-500">Nenhum produto adicionado até o momento.</div>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 text-left text-[12px]">
                                        <thead class="bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 font-semibold">Produto</th>
                                                <th scope="col" class="px-4 py-3 font-semibold">Quantidade</th>
                                                <th scope="col" class="px-4 py-3 font-semibold">Unidade</th>
                                                <th scope="col" class="px-4 py-3 text-right font-semibold">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="pdv-transfer-items-body" class="divide-y divide-gray-100"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <p id="pdv-transfer-error" class="hidden rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-[11px] font-semibold text-rose-600"></p>
                    </div>
                </div>
                <div class="flex flex-col gap-3 border-t border-gray-100 bg-gray-50 px-5 py-4 text-[11px] sm:flex-row sm:items-center sm:justify-between">
                    <p class="text-gray-500">Após o envio, a solicitação ficará disponível na tela de aprovações de transferências.</p>
                    <div class="flex items-center gap-2">
                        <button type="button" id="pdv-transfer-cancel" class="inline-flex items-center gap-2 rounded-lg border border-gray-200 px-4 py-2 text-[11px] font-semibold uppercase tracking-wide text-gray-600 transition hover:bg-gray-50">Cancelar</button>
                        <button type="button" id="pdv-transfer-submit" class="inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-[11px] font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-60">
                            <i class="fas fa-paper-plane"></i>
                            <span>Enviar solicitação</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-exchange-modal" class="fixed inset-0 z-[65] hidden">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm" data-exchange-dismiss="backdrop"></div>
        <div class="relative mx-auto flex min-h-full w-full items-start justify-center px-3 py-6 sm:items-center">
            <div class="relative flex w-full pdv-exchange-shell pdv-exchange-surface transform-gpu flex-col overflow-hidden rounded-2xl text-[12px] leading-[1.35] shadow-2xl transition-all duration-200 ease-out max-h-[90vh] min-h-0">
                <div class="flex items-center justify-between bg-gray-600 px-4 py-2 text-white pdv-exchange-header">
                    <span class="text-[11px] font-semibold uppercase tracking-wide">Troca de Mercadoria</span>
                    <button type="button" data-exchange-dismiss="close" class="inline-flex items-center justify-center rounded-full border border-white/30 p-1.5 text-white transition hover:bg-white/10" aria-label="Fechar modal de troca">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="flex-1 overflow-y-auto px-4 py-4 space-y-4">
                    <section class="rounded-xl border border-gray-200 bg-white px-4 py-4 pdv-exchange-panel">
                        <div class="grid grid-cols-1 gap-3 md:grid-cols-6">
                            <div class="md:col-span-1">
                                <label for="pdv-exchange-code" class="block text-[11px] font-semibold text-gray-600">Codigo</label>
                                <input type="text" id="pdv-exchange-code" class="mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                            <div class="md:col-span-1">
                                <label for="pdv-exchange-date" class="block text-[11px] font-semibold text-gray-600">Data da Troca</label>
                                <div class="relative mt-1">
                                    <input type="date" id="pdv-exchange-date" class="w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[12px] text-gray-400"><i class="fas fa-calendar-days"></i></span>
                                </div>
                            </div>
                            <div class="md:col-span-2">
                                <label for="pdv-exchange-seller" class="block text-[11px] font-semibold text-gray-600">*Vendedor (F2)</label>
                                <input type="text" id="pdv-exchange-seller" class="mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                            <div class="md:col-span-2">
                                <label for="pdv-exchange-seller-name" class="block text-[11px] font-semibold text-gray-600">&nbsp;</label>
                                <input type="text" id="pdv-exchange-seller-name" class="mt-1 w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[12px] text-gray-600" placeholder="" readonly>
                            </div>
                        </div>

                        <div class="mt-3 grid grid-cols-1 gap-3 md:grid-cols-6">
                            <div class="md:col-span-2">
                                <label for="pdv-exchange-type" class="block text-[11px] font-semibold text-gray-600">Tipo</label>
                                <select id="pdv-exchange-type" class="mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                                    <option value="troca">Troca de Mercadoria</option>
                                    <option value="historico">Por Historico</option>
                                    <option value="venda">Por Codigo de Venda</option>
                                </select>
                            </div>
                            <div class="md:col-span-2">
                                <label for="pdv-exchange-client" class="block text-[11px] font-semibold text-gray-600">Cliente (F2)</label>
                                <input type="text" id="pdv-exchange-client" class="mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                            <div class="md:col-span-2">
                                <label for="pdv-exchange-client-name" class="block text-[11px] font-semibold text-gray-600">&nbsp;</label>
                                <input type="text" id="pdv-exchange-client-name" class="mt-1 w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[12px] text-gray-600" readonly>
                            </div>
                        </div>
                    </section>

                    <section class="grid grid-cols-1 gap-4 lg:grid-cols-2">
                        <div class="rounded-xl border border-gray-300 bg-white overflow-hidden pdv-exchange-card">
                            <div class="bg-gray-600 px-4 py-2 text-[12px] font-semibold text-white pdv-exchange-card-title">Produtos a serem devolvidos</div>
                            <div class="px-4 py-3">
                                <div class="grid grid-cols-1 gap-2 text-[11px] text-gray-600 md:grid-cols-12">
                                    <div class="md:col-span-2">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Codigo</label>
                                        <input type="text" id="pdv-exchange-return-code" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]" placeholder="Codigo">
                                    </div>
                                    <div class="md:col-span-4">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Descricao</label>
                                        <input type="text" id="pdv-exchange-return-desc" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]" placeholder="Descricao">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Deposito</label>
                                        <select id="pdv-exchange-return-deposit" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                            <option value="">Loja</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">QTD</label>
                                        <input type="text" id="pdv-exchange-return-qty" inputmode="decimal" value="1,000" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Unitario</label>
                                        <input type="text" id="pdv-exchange-return-unit" inputmode="decimal" value="0,00" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Total</label>
                                        <input type="text" id="pdv-exchange-return-total" inputmode="decimal" value="0,00" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                </div>
                            </div>
                            <div class="border-t border-gray-200 pdv-exchange-table">
                                <table class="min-w-full divide-y divide-gray-200 text-left text-[11px] text-gray-600">
                                    <thead class="bg-gray-200 text-[10px] uppercase tracking-wide text-gray-500">
                                        <tr>
                                            <th class="px-3 py-2 font-semibold">Codigo</th>
                                            <th class="px-3 py-2 font-semibold">Descricao</th>
                                            <th class="px-3 py-2 font-semibold text-right">Qtde</th>
                                            <th class="px-3 py-2 font-semibold text-right">Unit</th>
                                            <th class="px-3 py-2 font-semibold text-right">Total</th>
                                            <th class="px-3 py-2 font-semibold text-right">Deposito</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pdv-exchange-return-body" class="divide-y divide-gray-100"></tbody>
                                    <tbody>
                                        <tr id="pdv-exchange-return-empty">
                                            <td colspan="6" class="px-3 py-10 text-center text-[11px] text-gray-500">Nao ha conteudo na tabela</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="bg-gray-600 px-4 py-2 text-[11px] font-semibold text-white pdv-exchange-card-footer">
                                Quantidade de produtos que serao devolvidos: <span id="pdv-exchange-return-count">0</span>
                            </div>
                        </div>

                        <div class="rounded-xl border border-gray-300 bg-white overflow-hidden pdv-exchange-card">
                            <div class="bg-gray-600 px-4 py-2 text-[12px] font-semibold text-white pdv-exchange-card-title">Produtos a serem levados</div>
                            <div class="px-4 py-3">
                                <div class="grid grid-cols-1 gap-2 text-[11px] text-gray-600 md:grid-cols-12">
                                    <div class="md:col-span-2">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Codigo</label>
                                        <input type="text" id="pdv-exchange-take-code" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]" placeholder="Codigo">
                                    </div>
                                    <div class="md:col-span-4">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Descricao</label>
                                        <input type="text" id="pdv-exchange-take-desc" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]" placeholder="Descricao">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Deposito</label>
                                        <select id="pdv-exchange-take-deposit" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                            <option value="">Loja</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">QTD</label>
                                        <input type="text" id="pdv-exchange-take-qty" inputmode="decimal" value="1,000" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Unitario</label>
                                        <input type="text" id="pdv-exchange-take-unit" inputmode="decimal" value="0,00" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Desc</label>
                                        <input type="text" id="pdv-exchange-take-discount" inputmode="decimal" value="0,00" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                    <div class="md:col-span-1">
                                        <label class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Total</label>
                                        <input type="text" id="pdv-exchange-take-total" inputmode="decimal" value="0,00" class="mt-1 w-full rounded-md border border-gray-200 px-2 py-1 text-[12px]">
                                    </div>
                                </div>
                            </div>
                            <div class="border-t border-gray-200 pdv-exchange-table">
                                <table class="min-w-full divide-y divide-gray-200 text-left text-[11px] text-gray-600">
                                    <thead class="bg-gray-200 text-[10px] uppercase tracking-wide text-gray-500">
                                        <tr>
                                            <th class="px-3 py-2 font-semibold">Codigo</th>
                                            <th class="px-3 py-2 font-semibold">Descricao</th>
                                            <th class="px-3 py-2 font-semibold text-right">Qtde</th>
                                            <th class="px-3 py-2 font-semibold text-right">Unit</th>
                                            <th class="px-3 py-2 font-semibold text-right">Total</th>
                                            <th class="px-3 py-2 font-semibold text-right">Desc.</th>
                                            <th class="px-3 py-2 font-semibold text-right">Deposito</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pdv-exchange-take-body" class="divide-y divide-gray-100"></tbody>
                                    <tbody>
                                        <tr id="pdv-exchange-take-empty">
                                            <td colspan="7" class="px-3 py-10 text-center text-[11px] text-gray-500">Nao ha conteudo na tabela</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="bg-gray-600 px-4 py-2 text-[11px] font-semibold text-white pdv-exchange-card-footer">
                                Quantidade de produtos que serao levados: <span id="pdv-exchange-take-count">0</span>
                            </div>
                        </div>
                    </section>

                    <section class="rounded-xl border border-gray-200 bg-white px-4 py-3 pdv-exchange-summary">
                        <div class="flex flex-col gap-3 md:flex-row md:items-center">
                            <div class="text-[12px] font-semibold text-gray-700">
                                Valor da diferenca: <span id="pdv-exchange-diff" class="font-bold">R$ 0,00</span>
                            </div>
                            <div class="flex-1">
                                <label for="pdv-exchange-notes" class="block text-[10px] font-semibold uppercase tracking-wide text-gray-400">Observacoes</label>
                                <input type="text" id="pdv-exchange-notes" class="mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-[12px] focus:border-primary focus:ring-2 focus:ring-primary/20">
                            </div>
                        </div>
                    </section>
                </div>

                <div class="grid grid-cols-1 gap-3 border-t border-gray-200 bg-white px-4 py-3 md:grid-cols-5 pdv-exchange-actions">
                    <button type="button" id="pdv-exchange-save" class="inline-flex items-center justify-center rounded-lg bg-emerald-200 px-4 py-3 text-[13px] font-semibold text-white shadow-sm transition hover:bg-emerald-300">
                        Gravar (CTRL+G)
                    </button>
                    <button type="button" id="pdv-exchange-delete" class="inline-flex items-center justify-center rounded-lg bg-rose-200 px-4 py-3 text-[13px] font-semibold text-white shadow-sm transition hover:bg-rose-300">
                        Excluir (CTRL+E)
                    </button>
                    <button type="button" id="pdv-exchange-finish" class="inline-flex items-center justify-center rounded-lg bg-emerald-200 px-4 py-3 text-[13px] font-semibold text-white shadow-sm transition hover:bg-emerald-300">
                        Finalizar (F5)
                    </button>
                    <button type="button" id="pdv-exchange-print" class="inline-flex items-center justify-center rounded-lg bg-indigo-200 px-4 py-3 text-[13px] font-semibold text-white shadow-sm transition hover:bg-indigo-300">
                        Imprimir (F6)
                    </button>
                    <button type="button" id="pdv-exchange-exit" class="inline-flex items-center justify-center rounded-lg bg-red-700 px-4 py-3 text-[13px] font-semibold text-white shadow-sm transition hover:bg-red-800">
                        Sair (Esc)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-exchange-history-modal" class="fixed inset-0 z-[70] hidden" aria-hidden="true">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" data-exchange-history-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-12 w-full max-w-5xl px-4">
            <div class="overflow-hidden rounded-2xl bg-white shadow-2xl ring-1 ring-black/5">
                <div class="flex items-center justify-between border-b border-gray-200 px-5 py-4">
                    <div>
                        <h2 class="text-lg font-semibold text-gray-800">Historico de vendas</h2>
                        <p class="text-sm text-gray-500">Selecione o cliente e o periodo para localizar as vendas.</p>
                    </div>
                    <button type="button" id="pdv-exchange-history-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar historico de vendas">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4 px-5 py-5">
                    <div class="grid grid-cols-1 gap-3 md:grid-cols-6">
                        <div class="md:col-span-2">
                            <label for="pdv-exchange-history-client" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Cliente</label>
                            <input id="pdv-exchange-history-client" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Codigo do cliente">
                        </div>
                        <div class="md:col-span-4">
                            <label for="pdv-exchange-history-client-name" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">&nbsp;</label>
                            <input id="pdv-exchange-history-client-name" type="text" class="mt-1 w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-600" readonly>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-3 md:grid-cols-4">
                        <div class="md:col-span-2">
                            <label for="pdv-exchange-history-start" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Periodo inicio</label>
                            <input id="pdv-exchange-history-start" type="date" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                        </div>
                        <div class="md:col-span-2">
                            <label for="pdv-exchange-history-end" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Periodo fim</label>
                            <input id="pdv-exchange-history-end" type="date" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20">
                        </div>
                    </div>
                    <div class="overflow-hidden rounded-lg border border-gray-200">
                        <div class="max-h-72 overflow-y-auto">
                            <table class="min-w-full divide-y divide-gray-200 text-left text-[11px] text-gray-600">
                                <thead class="sticky top-0 bg-gray-100 text-[10px] uppercase tracking-wide text-gray-500">
                                    <tr>
                                        <th class="w-10 px-3 py-2 text-center font-semibold"><span class="sr-only">Selecionar</span></th>
                                        <th class="px-3 py-2 font-semibold">Codigo</th>
                                        <th class="px-3 py-2 font-semibold">Data</th>
                                        <th class="px-3 py-2 font-semibold text-center">Itens</th>
                                        <th class="px-3 py-2 font-semibold text-right">Total</th>
                                        <th class="px-3 py-2 font-semibold">Vendedor</th>
                                    </tr>
                                </thead>
                                <tbody id="pdv-exchange-history-body" class="divide-y divide-gray-100"></tbody>
                                <tbody>
                                    <tr id="pdv-exchange-history-empty">
                                        <td colspan="6" class="px-3 py-6 text-center text-[11px] text-gray-500">Selecione um cliente para visualizar as vendas.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-2 border-t border-gray-200 bg-gray-50 px-5 py-4">
                    <button type="button" id="pdv-exchange-history-import" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60" disabled>Importar</button>
                    <button type="button" id="pdv-exchange-history-close-footer" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-exchange-sale-modal" class="fixed inset-0 z-[70] hidden" aria-hidden="true">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" data-exchange-sale-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-12 w-full max-w-5xl px-4">
            <div class="overflow-hidden rounded-2xl bg-white shadow-2xl ring-1 ring-black/5">
                <div class="flex items-center justify-between border-b border-gray-200 px-5 py-4">
                    <div>
                        <h2 class="text-lg font-semibold text-gray-800">Buscar venda</h2>
                        <p class="text-sm text-gray-500">Informe o codigo da venda para selecionar os produtos.</p>
                    </div>
                    <button type="button" id="pdv-exchange-sale-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar busca de venda">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4 px-5 py-5">
                    <div class="grid grid-cols-1 gap-3 md:grid-cols-6">
                        <div class="md:col-span-2">
                            <label for="pdv-exchange-sale-code" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Codigo da venda</label>
                            <input id="pdv-exchange-sale-code" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Ex: PDV001-000004">
                        </div>
                        <div class="md:col-span-4">
                            <label for="pdv-exchange-sale-info" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Resumo</label>
                            <input id="pdv-exchange-sale-info" type="text" class="mt-1 w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-600" readonly>
                        </div>
                    </div>
                    <div class="overflow-hidden rounded-lg border border-gray-200">
                        <div class="max-h-72 overflow-y-auto">
                            <table class="min-w-full divide-y divide-gray-200 text-left text-[11px] text-gray-600">
                                <thead class="sticky top-0 bg-gray-100 text-[10px] uppercase tracking-wide text-gray-500">
                                    <tr>
                                        <th class="w-10 px-3 py-2 text-center font-semibold"><span class="sr-only">Selecionar</span></th>
                                        <th class="px-3 py-2 font-semibold">Codigo</th>
                                        <th class="px-3 py-2 font-semibold">Descricao</th>
                                        <th class="px-3 py-2 font-semibold text-right">Qtde</th>
                                        <th class="px-3 py-2 font-semibold text-right">Unitario</th>
                                        <th class="px-3 py-2 font-semibold text-right">Total</th>
                                    </tr>
                                </thead>
                                <tbody id="pdv-exchange-sale-items-body" class="divide-y divide-gray-100"></tbody>
                                <tbody>
                                    <tr id="pdv-exchange-sale-items-empty">
                                        <td colspan="6" class="px-3 py-6 text-center text-[11px] text-gray-500">Informe o codigo da venda para carregar os itens.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-2 border-t border-gray-200 bg-gray-50 px-5 py-4">
                    <button type="button" id="pdv-exchange-sale-import" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60" disabled>Importar</button>
                    <button type="button" id="pdv-exchange-sale-close-footer" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-sale-cancel-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-sale-cancel-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-20 w-full max-w-xl overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Cancelar venda</h2>
                    <p class="text-sm text-gray-500">Informe o motivo do cancelamento para continuar.</p>
                </div>
                <button type="button" id="pdv-sale-cancel-close" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" aria-label="Fechar modal de cancelamento">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-5 px-6 py-5">
                <div>
                    <label for="pdv-sale-cancel-reason" class="block text-sm font-semibold text-gray-700">Motivo do cancelamento</label>
                    <textarea id="pdv-sale-cancel-reason" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Descreva o motivo do cancelamento"></textarea>
                    <p id="pdv-sale-cancel-error" class="mt-2 hidden text-xs font-medium text-rose-600">Informe o motivo para cancelar a venda.</p>
                </div>
                <div class="flex flex-col-reverse gap-2 sm:flex-row sm:justify-end">
                    <button type="button" id="pdv-sale-cancel-cancel" class="inline-flex items-center justify-center rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:border-gray-300 hover:text-gray-700">Voltar</button>
                    <button type="button" id="pdv-sale-cancel-confirm" class="inline-flex items-center justify-center rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-200">Confirmar cancelamento</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-delivery-address-modal" class="fixed inset-0 z-[55] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-delivery-address-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-16 w-full max-w-3xl overflow-hidden rounded-2xl bg-white shadow-2xl">
            <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Selecionar endereço de entrega</h2>
                    <p class="text-sm text-gray-500">Confirme o endereço do cliente ou cadastre um novo para continuar.</p>
                </div>
                <button type="button" class="rounded-full p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600" data-delivery-address-dismiss="close" aria-label="Fechar modal de endereços">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-5 px-6 py-5">
                <div id="pdv-delivery-address-loading" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">
                    Carregando endereços do cliente...
                </div>
                <div id="pdv-delivery-address-empty" class="hidden rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-sm text-gray-500">
                    Este cliente ainda não possui endereços cadastrados. Adicione um novo abaixo.
                </div>
                <div id="pdv-delivery-address-list" class="space-y-2"></div>
                <button id="pdv-delivery-address-add" type="button" class="inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-sm font-semibold text-gray-600 transition hover:border-primary hover:text-primary">
                    <i class="fas fa-plus"></i>
                    <span>Cadastrar novo endereço</span>
                </button>
                <form id="pdv-delivery-address-form" class="hidden grid grid-cols-1 gap-4 rounded-xl border border-gray-200 bg-gray-50 px-4 py-4 md:grid-cols-2">
                    <div class="md:col-span-2">
                        <label for="pdv-delivery-address-apelido" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Apelido</label>
                        <input id="pdv-delivery-address-apelido" name="apelido" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Principal, Casa, Trabalho" autocomplete="off">
                    </div>
                    <div>
                        <label for="pdv-delivery-address-cep" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">CEP *</label>
                        <input id="pdv-delivery-address-cep" name="cep" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="00000-000" autocomplete="postal-code" required>
                    </div>
                    <div>
                        <label for="pdv-delivery-address-numero" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Número *</label>
                        <input id="pdv-delivery-address-numero" name="numero" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="S/N" autocomplete="off" required>
                    </div>
                    <div class="md:col-span-2">
                        <label for="pdv-delivery-address-logradouro" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Endereço *</label>
                        <input id="pdv-delivery-address-logradouro" name="logradouro" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Rua, avenida..." autocomplete="address-line1" required>
                    </div>
                    <div>
                        <label for="pdv-delivery-address-bairro" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Bairro</label>
                        <input id="pdv-delivery-address-bairro" name="bairro" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="address-line2">
                    </div>
                    <div>
                        <label for="pdv-delivery-address-cidade" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Cidade</label>
                        <input id="pdv-delivery-address-cidade" name="cidade" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="address-level2">
                    </div>
                    <div>
                        <label for="pdv-delivery-address-uf" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">UF</label>
                        <input id="pdv-delivery-address-uf" name="uf" type="text" maxlength="2" class="mt-1 w-full uppercase rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" autocomplete="address-level1">
                    </div>
                    <div>
                        <label for="pdv-delivery-address-complemento" class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Complemento</label>
                        <input id="pdv-delivery-address-complemento" name="complemento" type="text" class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="Apartamento, bloco..." autocomplete="address-line2">
                    </div>
                    <div class="md:col-span-2">
                        <label class="inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-gray-500">
                            <input id="pdv-delivery-address-default" name="isDefault" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                            Definir como endereço principal
                        </label>
                    </div>
                    <div class="md:col-span-2 flex items-center justify-end gap-2">
                        <button type="button" id="pdv-delivery-address-cancel-form" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                        <button type="submit" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">Salvar endereço</button>
                    </div>
                </form>
            </div>
            <div class="flex items-center justify-between gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4">
                <p class="text-xs text-gray-500">Selecione o endereço que receberá a entrega para avançar.</p>
                <div class="flex items-center gap-2">
                    <button type="button" id="pdv-delivery-address-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                    <button type="button" id="pdv-delivery-address-confirm" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary disabled:cursor-not-allowed disabled:opacity-60">Continuar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="pdv-payment-value-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/60" data-pdv-payment-dismiss="backdrop"></div>
        <div class="relative mx-auto mt-24 w-full max-w-md rounded-2xl bg-white shadow-2xl">
            <div class="border-b border-gray-200 px-5 py-4">
                <h3 id="pdv-payment-value-title" class="text-base font-semibold text-gray-800">Informar pagamento</h3>
                <p id="pdv-payment-value-subtitle" class="mt-1 text-xs text-gray-500"></p>
            </div>
            <div class="space-y-4 px-5 py-5">
                <label for="pdv-payment-value-input" class="block text-sm font-medium text-gray-700">Valor recebido</label>
                <div class="relative">
                    <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500">R$</span>
                    <input type="number" min="0" step="0.01" id="pdv-payment-value-input" class="w-full rounded-lg border border-gray-200 px-3 py-2 pl-9 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="0,00">
                </div>
                <p id="pdv-payment-value-hint" class="text-xs text-gray-500"></p>
                <div class="flex items-center justify-end gap-2">
                    <button type="button" id="pdv-payment-value-cancel" class="rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-100">Cancelar</button>
                    <button type="button" id="pdv-payment-value-confirm" class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <script>var basePath = '../../';</script>
    <script src="../../scripts/core/config.js"></script>
    <script src="../../scripts/core/ui.js"></script>
    <script src="../../scripts/core/main.js"></script>
    <div id="ifood-orders-modal" class="hidden fixed inset-0 z-[999] bg-black/50 flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-5xl rounded-2xl shadow-xl overflow-hidden">
            <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
                <div>
                    <p class="text-xs font-semibold text-primary uppercase tracking-wide">iFood</p>
                    <h3 class="text-lg font-bold text-gray-800">Pedidos</h3>
                </div>
                <button type="button" id="ifood-modal-close" class="text-gray-500 hover:text-gray-700 transition">&times;</button>
            </div>
            <div class="px-6 pt-4 pb-2 border-b border-gray-200 bg-gray-50">
                <div class="flex flex-wrap gap-2">
                    <button type="button" data-ifood-tab="pedidos" class="ifood-tab-btn px-3 py-2 text-xs font-semibold rounded-full border border-gray-200 text-gray-700 bg-white hover:border-primary hover:text-primary transition">Pedidos</button>
                    <button type="button" data-ifood-tab="separacao" class="ifood-tab-btn px-3 py-2 text-xs font-semibold rounded-full border border-gray-200 text-gray-700 bg-white hover:border-primary hover:text-primary transition">Separação</button>
                    <button type="button" data-ifood-tab="empacotar" class="ifood-tab-btn px-3 py-2 text-xs font-semibold rounded-full border border-gray-200 text-gray-700 bg-white hover:border-primary hover:text-primary transition">Expedição</button>
                    <button type="button" data-ifood-tab="concluidos" class="ifood-tab-btn px-3 py-2 text-xs font-semibold rounded-full border border-gray-200 text-gray-700 bg-white hover:border-primary hover:text-primary transition">Concluídos</button>
                    <button type="button" data-ifood-tab="cancelados" class="ifood-tab-btn px-3 py-2 text-xs font-semibold rounded-full border border-gray-200 text-gray-700 bg-white hover:border-primary hover:text-primary transition">Cancelados</button>
                </div>
            </div>
            <div class="p-6 max-h-[70vh] overflow-y-auto">
                <div id="ifood-orders-loading" class="flex items-center gap-2 text-sm text-gray-600"><i class="fas fa-circle-notch animate-spin"></i> Carregando pedidos...</div>
                <div id="ifood-orders-error" class="hidden text-sm text-red-600"></div>
                <div id="ifood-orders-empty" class="hidden text-sm text-gray-500">Nenhum pedido nesta aba.</div>
                <div id="ifood-orders-list" class="hidden divide-y divide-gray-100 text-sm"></div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-3 border-t border-gray-200 bg-gray-50">
                <button type="button" id="ifood-modal-close-footer" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-gray-800">Fechar</button>
            </div>
        </div>
    </div>
    <script src="../../scripts/admin/admin.js"></script>
    <script src="../../scripts/admin/admin-pdv.js"></script>
    <script src="/scripts/common/modal-bridge.js"></script>
</body>
</html>
